{"version":3,"sources":["../src/indexeddb.ts","../src/constants.ts","../src/assert.ts","../src/crypt.ts","../src/deepCopy.ts","../src/deferred.ts","../src/emulator.ts","../src/environment.ts","../src/errors.ts","../src/json.ts","../src/jwt.ts","../src/obj.ts","../src/query.ts","../src/sha1.ts","../src/subscribe.ts","../src/validation.ts","../src/utf8.ts","../src/exponential_backoff.ts","../src/formatters.ts","../src/compat.ts","../../src/component_container.ts","../../src/component.ts","../../src/constants.ts","../../src/provider.ts","../../src/logger.ts","../../src/index.ts","../../src/platformLoggerService.ts","../../src/internal.ts","../../src/errors.ts","../../src/firebaseApp.ts","../../src/api.ts","../../src/indexeddb.ts","../../src/heartbeatService.ts","../../src/registerCoreComponents.ts","../index.ts","nave.js","colision.js","laser.js","entradas.js","dashboard.js","menu.js","invasor.js","niveles.js","funciones.js","powerup.js","estrella.js","juego.js","index.js"],"names":["stringToByteArray","appName","appCompatName","analyticsName","analyticsCompatName","appCheckName","appCheckCompatName","authName","authCompatName","databaseName","databaseCompatName","functionsName","functionsCompatName","installationsName","installationsCompatName","messagingName","messagingCompatName","performanceName","performanceCompatName","remoteConfigName","remoteConfigCompatName","storageName","storageCompatName","firestoreName","firestoreCompatName","packageName","setLogLevelImpl","name","version","Nave","juego","posicion","x","y","limite","i","wi","d","wd","tipo","w","h","velocidad","max","crearNave","ctx","cambiarDeTama√±o","invasores","forEach","invasor","vidas","color","fila","fi","columna","ci","fillStyle","fillRect","wj","colision","objeto1","objeto2","p","o","Laser","n","borde","disparo","puntos","energia","sonidoImpacto","play","nave","canones","limiteDeLaser","autofire","sonidoImpactoNave","exterior","interior","Entradas","document","addEventListener","event","keyCode","pausa","iniciar","izquierda","agregarLaser","derecha","sonidoFondo","stop","detener","Dashboard","wd1","wd2","x1","y1","grd","createLinearGradient","addColorStop","grd1","textAling","font","fillText","nivel","tiempoDelta","ESTADO","PAUSA","NUEVO","CORRIENDO","NUEVONIVEL","GAMEOVER","Menu","estado","Invasor","pos","mov","Math","floor","random","crearInvasor","invasorVelocidad","sonidoDisparo","cambiaAlturaInvasor","figura","wf","hf","filaIndex","columnaIndex","ancho","alto","crearNivel","regreso","push","nivelRandom","level","dificultad","parseInt","dificultades","tiposDeInvasor","lineas","filas","index","sound","src","loop","createElement","setAttribute","style","display","body","appendChild","pause","tomarDatosArduinio","p1","requestPromesa","Promise","all","then","respuestas","myObj","JSON","parse","online","valor","catch","statusError","console","error","method","url","resolve","reject","xhr","XMLHttpRequest","open","onload","status","response","statusText","onerror","send","TIPOS","vida","laser","nombre","letra","Powerup","powerUP","laserNave","length","soundCapturado","beginPath","arc","PI","fill","Estrella","picos","rI","rE","opacity","angulo","radioI","radioE","factor","increment","estrella","centerX","centerY","arms","innerRadius","outerRadius","opacidad","startAngle","hyp","step","angle","len","cos","sin","lineTo","closePath","stroke","Juego","canvas","getContext","documentElement","clientWidth","clientHeight","numeroEstrellas","round","laserInvasor","entradas","powerUPS","dashboard","estrellas","menu","sonidoIniciar","sonidoNivel","sonidoOver","sonidoDisparoNave","Objecto","dibujar","agregarEstrella","filter","agregarPowerUP","power","actualizar","restablecer","width","height","reposicion","px","py","altura","getElementById","tiempoPasado","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","app","cicloDeJuego","tiempo","requestAnimationFrame"],"mappings":"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,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEvC,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACrC,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QAAS,GAEX,EAAG,CACD,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEjC,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEjC,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEjClB,MAAO,CACL,EAAG,MACH,EAAG,SAELkB,QAAS,GAEX,EAAG,CACD,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEjC,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEjC,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEjClB,MAAO,CACL,EAAG,SACH,EAAG,SAELkB,QAAS,GAEX,EAAG,CACD,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEjC,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEjC,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEjClB,MAAO,CACL,EAAG,SACH,EAAG,SAELkB,QAAS,GAEX,EAAG,CACD,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEjC,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAEjC,EAAG,CACD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,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","file":"src.04bd0df4.js","sourceRoot":"..","sourcesContent":["/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @internal\n */\nfunction promisifyRequest(\n  request: IDBRequest,\n  errorMessage: string\n): Promise<unknown> {\n  return new Promise((resolve, reject) => {\n    request.onsuccess = event => {\n      resolve((event.target as IDBRequest).result);\n    };\n    request.onerror = event => {\n      reject(`${errorMessage}: ${(event.target as IDBRequest).error?.message}`);\n    };\n  });\n}\n\n/**\n * @internal\n */\nexport class DBWrapper {\n  objectStoreNames: DOMStringList;\n  constructor(private _db: IDBDatabase) {\n    this.objectStoreNames = this._db.objectStoreNames;\n  }\n  transaction(\n    storeNames: string[] | string,\n    mode: IDBTransactionMode = 'readonly'\n  ): TransactionWrapper {\n    return new TransactionWrapper(\n      this._db.transaction.call(this._db, storeNames, mode)\n    );\n  }\n  createObjectStore(\n    storeName: string,\n    options?: IDBObjectStoreParameters\n  ): ObjectStoreWrapper {\n    return new ObjectStoreWrapper(\n      this._db.createObjectStore(storeName, options)\n    );\n  }\n  close(): void {\n    this._db.close();\n  }\n}\n\n/**\n * @internal\n */\nclass TransactionWrapper {\n  complete: Promise<void>;\n  constructor(private _transaction: IDBTransaction) {\n    this.complete = new Promise((resolve, reject) => {\n      this._transaction.oncomplete = function () {\n        resolve();\n      };\n      this._transaction.onerror = () => {\n        reject(this._transaction.error);\n      };\n      this._transaction.onabort = () => {\n        reject(this._transaction.error);\n      };\n    });\n  }\n  objectStore(storeName: string): ObjectStoreWrapper {\n    return new ObjectStoreWrapper(this._transaction.objectStore(storeName));\n  }\n}\n\n/**\n * @internal\n */\nclass ObjectStoreWrapper {\n  constructor(private _store: IDBObjectStore) {}\n  index(name: string): IndexWrapper {\n    return new IndexWrapper(this._store.index(name));\n  }\n  createIndex(\n    name: string,\n    keypath: string,\n    options: IDBIndexParameters\n  ): IndexWrapper {\n    return new IndexWrapper(this._store.createIndex(name, keypath, options));\n  }\n  get(key: string): Promise<unknown> {\n    const request = this._store.get(key);\n    return promisifyRequest(request, 'Error reading from IndexedDB');\n  }\n  put(value: unknown, key?: string): Promise<unknown> {\n    const request = this._store.put(value, key);\n    return promisifyRequest(request, 'Error writing to IndexedDB');\n  }\n  delete(key: string): Promise<unknown> {\n    const request = this._store.delete(key);\n    return promisifyRequest(request, 'Error deleting from IndexedDB');\n  }\n  clear(): Promise<unknown> {\n    const request = this._store.clear();\n    return promisifyRequest(request, 'Error clearing IndexedDB object store');\n  }\n}\n\n/**\n * @internal\n */\nclass IndexWrapper {\n  constructor(private _index: IDBIndex) {}\n  get(key: string): Promise<unknown> {\n    const request = this._index.get(key);\n    return promisifyRequest(request, 'Error reading from IndexedDB');\n  }\n}\n\n/**\n * @internal\n */\nexport function openDB(\n  dbName: string,\n  dbVersion: number,\n  upgradeCallback: (\n    db: DBWrapper,\n    oldVersion: number,\n    newVersion: number | null,\n    transaction: TransactionWrapper\n  ) => void\n): Promise<DBWrapper> {\n  return new Promise((resolve, reject) => {\n    try {\n      const request = indexedDB.open(dbName, dbVersion);\n\n      request.onsuccess = event => {\n        resolve(new DBWrapper((event.target as IDBOpenDBRequest).result));\n      };\n\n      request.onerror = event => {\n        reject(\n          `Error opening indexedDB: ${\n            (event.target as IDBRequest).error?.message\n          }`\n        );\n      };\n\n      request.onupgradeneeded = event => {\n        upgradeCallback(\n          new DBWrapper(request.result),\n          event.oldVersion,\n          event.newVersion,\n          new TransactionWrapper(request.transaction!)\n        );\n      };\n    } catch (e) {\n      reject(`Error opening indexedDB: ${e.message}`);\n    }\n  });\n}\n\n/**\n * @internal\n */\nexport async function deleteDB(dbName: string): Promise<void> {\n  return new Promise((resolve, reject) => {\n    try {\n      const request = indexedDB.deleteDatabase(dbName);\n      request.onsuccess = () => {\n        resolve();\n      };\n      request.onerror = event => {\n        reject(\n          `Error deleting indexedDB database \"${dbName}\": ${\n            (event.target as IDBRequest).error?.message\n          }`\n        );\n      };\n    } catch (e) {\n      reject(`Error deleting indexedDB database \"${dbName}\": ${e.message}`);\n    }\n  });\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\n */\n\nexport const CONSTANTS = {\n  /**\n   * @define {boolean} Whether this is the client Node.js SDK.\n   */\n  NODE_CLIENT: false,\n  /**\n   * @define {boolean} Whether this is the Admin Node.js SDK.\n   */\n  NODE_ADMIN: false,\n\n  /**\n   * Firebase SDK Version\n   */\n  SDK_VERSION: '${JSCORE_VERSION}'\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\n\n/**\n * Throws an error if the provided assertion is falsy\n */\nexport const assert = function (assertion: unknown, message: string): void {\n  if (!assertion) {\n    throw assertionError(message);\n  }\n};\n\n/**\n * Returns an Error object suitable for throwing.\n */\nexport const assertionError = function (message: string): Error {\n  return new Error(\n    'Firebase Database (' +\n      CONSTANTS.SDK_VERSION +\n      ') INTERNAL ASSERT FAILED: ' +\n      message\n  );\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst stringToByteArray = function (str: string): number[] {\n  // TODO(user): Use native implementations if/when available\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (\n      (c & 0xfc00) === 0xd800 &&\n      i + 1 < str.length &&\n      (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00\n    ) {\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Turns an array of numbers into the string given by the concatenation of the\n * characters to which the numbers correspond.\n * @param bytes Array of numbers representing characters.\n * @return Stringification of the array.\n */\nconst byteArrayToString = function (bytes: number[]): string {\n  // TODO(user): Use native implementations if/when available\n  const out: string[] = [];\n  let pos = 0,\n    c = 0;\n  while (pos < bytes.length) {\n    const c1 = bytes[pos++];\n    if (c1 < 128) {\n      out[c++] = String.fromCharCode(c1);\n    } else if (c1 > 191 && c1 < 224) {\n      const c2 = bytes[pos++];\n      out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n    } else if (c1 > 239 && c1 < 365) {\n      // Surrogate Pair\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      const c4 = bytes[pos++];\n      const u =\n        (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\n        0x10000;\n      out[c++] = String.fromCharCode(0xd800 + (u >> 10));\n      out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\n    } else {\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      out[c++] = String.fromCharCode(\n        ((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)\n      );\n    }\n  }\n  return out.join('');\n};\n\ninterface Base64 {\n  byteToCharMap_: { [key: number]: string } | null;\n  charToByteMap_: { [key: string]: number } | null;\n  byteToCharMapWebSafe_: { [key: number]: string } | null;\n  charToByteMapWebSafe_: { [key: string]: number } | null;\n  ENCODED_VALS_BASE: string;\n  readonly ENCODED_VALS: string;\n  readonly ENCODED_VALS_WEBSAFE: string;\n  HAS_NATIVE_SUPPORT: boolean;\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string;\n  encodeString(input: string, webSafe?: boolean): string;\n  decodeString(input: string, webSafe: boolean): string;\n  decodeStringToByteArray(input: string, webSafe: boolean): number[];\n  init_(): void;\n}\n\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\n// Static lookup maps, lazily populated by init_()\nexport const base64: Base64 = {\n  /**\n   * Maps bytes to characters.\n   */\n  byteToCharMap_: null,\n\n  /**\n   * Maps characters to bytes.\n   */\n  charToByteMap_: null,\n\n  /**\n   * Maps bytes to websafe characters.\n   * @private\n   */\n  byteToCharMapWebSafe_: null,\n\n  /**\n   * Maps websafe characters to bytes.\n   * @private\n   */\n  charToByteMapWebSafe_: null,\n\n  /**\n   * Our default alphabet, shared between\n   * ENCODED_VALS and ENCODED_VALS_WEBSAFE\n   */\n  ENCODED_VALS_BASE:\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\n\n  /**\n   * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\n   */\n  get ENCODED_VALS() {\n    return this.ENCODED_VALS_BASE + '+/=';\n  },\n\n  /**\n   * Our websafe alphabet.\n   */\n  get ENCODED_VALS_WEBSAFE() {\n    return this.ENCODED_VALS_BASE + '-_.';\n  },\n\n  /**\n   * Whether this browser supports the atob and btoa functions. This extension\n   * started at Mozilla but is now implemented by many browsers. We use the\n   * ASSUME_* variables to avoid pulling in the full useragent detection library\n   * but still allowing the standard per-browser compilations.\n   *\n   */\n  HAS_NATIVE_SUPPORT: typeof atob === 'function',\n\n  /**\n   * Base64-encode an array of bytes.\n   *\n   * @param input An array of bytes (numbers with\n   *     value in [0, 255]) to encode.\n   * @param webSafe Boolean indicating we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string {\n    if (!Array.isArray(input)) {\n      throw Error('encodeByteArray takes an array as a parameter');\n    }\n\n    this.init_();\n\n    const byteToCharMap = webSafe\n      ? this.byteToCharMapWebSafe_!\n      : this.byteToCharMap_!;\n\n    const output = [];\n\n    for (let i = 0; i < input.length; i += 3) {\n      const byte1 = input[i];\n      const haveByte2 = i + 1 < input.length;\n      const byte2 = haveByte2 ? input[i + 1] : 0;\n      const haveByte3 = i + 2 < input.length;\n      const byte3 = haveByte3 ? input[i + 2] : 0;\n\n      const outByte1 = byte1 >> 2;\n      const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n      let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\n      let outByte4 = byte3 & 0x3f;\n\n      if (!haveByte3) {\n        outByte4 = 64;\n\n        if (!haveByte2) {\n          outByte3 = 64;\n        }\n      }\n\n      output.push(\n        byteToCharMap[outByte1],\n        byteToCharMap[outByte2],\n        byteToCharMap[outByte3],\n        byteToCharMap[outByte4]\n      );\n    }\n\n    return output.join('');\n  },\n\n  /**\n   * Base64-encode a string.\n   *\n   * @param input A string to encode.\n   * @param webSafe If true, we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeString(input: string, webSafe?: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return btoa(input);\n    }\n    return this.encodeByteArray(stringToByteArray(input), webSafe);\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * @param input to decode.\n   * @param webSafe True if we should use the\n   *     alternative alphabet.\n   * @return string representing the decoded value.\n   */\n  decodeString(input: string, webSafe: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return atob(input);\n    }\n    return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * In base-64 decoding, groups of four characters are converted into three\n   * bytes.  If the encoder did not apply padding, the input length may not\n   * be a multiple of 4.\n   *\n   * In this case, the last group will have fewer than 4 characters, and\n   * padding will be inferred.  If the group has one or two characters, it decodes\n   * to one byte.  If the group has three characters, it decodes to two bytes.\n   *\n   * @param input Input to decode.\n   * @param webSafe True if we should use the web-safe alphabet.\n   * @return bytes representing the decoded value.\n   */\n  decodeStringToByteArray(input: string, webSafe: boolean): number[] {\n    this.init_();\n\n    const charToByteMap = webSafe\n      ? this.charToByteMapWebSafe_!\n      : this.charToByteMap_!;\n\n    const output: number[] = [];\n\n    for (let i = 0; i < input.length; ) {\n      const byte1 = charToByteMap[input.charAt(i++)];\n\n      const haveByte2 = i < input.length;\n      const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n      ++i;\n\n      const haveByte3 = i < input.length;\n      const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      const haveByte4 = i < input.length;\n      const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\n        throw Error();\n      }\n\n      const outByte1 = (byte1 << 2) | (byte2 >> 4);\n      output.push(outByte1);\n\n      if (byte3 !== 64) {\n        const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\n        output.push(outByte2);\n\n        if (byte4 !== 64) {\n          const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\n          output.push(outByte3);\n        }\n      }\n    }\n\n    return output;\n  },\n\n  /**\n   * Lazy static initialization function. Called before\n   * accessing any of the static map variables.\n   * @private\n   */\n  init_() {\n    if (!this.byteToCharMap_) {\n      this.byteToCharMap_ = {};\n      this.charToByteMap_ = {};\n      this.byteToCharMapWebSafe_ = {};\n      this.charToByteMapWebSafe_ = {};\n\n      // We want quick mappings back and forth, so we precompute two maps.\n      for (let i = 0; i < this.ENCODED_VALS.length; i++) {\n        this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\n        this.charToByteMap_[this.byteToCharMap_[i]] = i;\n        this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\n        this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\n\n        // Be forgiving when decoding and correctly decode both encodings.\n        if (i >= this.ENCODED_VALS_BASE.length) {\n          this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\n          this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\n        }\n      }\n    }\n  }\n};\n\n/**\n * URL-safe base64 encoding\n */\nexport const base64Encode = function (str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  return base64.encodeByteArray(utf8Bytes, true);\n};\n\n/**\n * URL-safe base64 encoding (without \".\" padding in the end).\n * e.g. Used in JSON Web Token (JWT) parts.\n */\nexport const base64urlEncodeWithoutPadding = function (str: string): string {\n  // Use base64url encoding and remove padding in the end (dot characters).\n  return base64Encode(str).replace(/\\./g, '');\n};\n\n/**\n * URL-safe base64 decoding\n *\n * NOTE: DO NOT use the global atob() function - it does NOT support the\n * base64Url variant encoding.\n *\n * @param str To be decoded\n * @return Decoded result, if possible\n */\nexport const base64Decode = function (str: string): string | null {\n  try {\n    return base64.decodeString(str, true);\n  } catch (e) {\n    console.error('base64Decode failed: ', e);\n  }\n  return null;\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Do a deep-copy of basic JavaScript Objects or Arrays.\n */\nexport function deepCopy<T>(value: T): T {\n  return deepExtend(undefined, value) as T;\n}\n\n/**\n * Copy properties from source to target (recursively allows extension\n * of Objects and Arrays).  Scalar values in the target are over-written.\n * If target is undefined, an object of the appropriate type will be created\n * (and returned).\n *\n * We recursively copy all child properties of plain Objects in the source- so\n * that namespace- like dictionaries are merged.\n *\n * Note that the target can be a function, in which case the properties in\n * the source Object are copied onto it as static properties of the Function.\n *\n * Note: we don't merge __proto__ to prevent prototype pollution\n */\nexport function deepExtend(target: unknown, source: unknown): unknown {\n  if (!(source instanceof Object)) {\n    return source;\n  }\n\n  switch (source.constructor) {\n    case Date:\n      // Treat Dates like scalars; if the target date object had any child\n      // properties - they will be lost!\n      const dateValue = source as Date;\n      return new Date(dateValue.getTime());\n\n    case Object:\n      if (target === undefined) {\n        target = {};\n      }\n      break;\n    case Array:\n      // Always copy the array source and overwrite the target.\n      target = [];\n      break;\n\n    default:\n      // Not a plain Object - treat it as a scalar.\n      return source;\n  }\n\n  for (const prop in source) {\n    // use isValidKey to guard against prototype pollution. See https://snyk.io/vuln/SNYK-JS-LODASH-450202\n    if (!source.hasOwnProperty(prop) || !isValidKey(prop)) {\n      continue;\n    }\n    (target as Record<string, unknown>)[prop] = deepExtend(\n      (target as Record<string, unknown>)[prop],\n      (source as Record<string, unknown>)[prop]\n    );\n  }\n\n  return target;\n}\n\nfunction isValidKey(key: string): boolean {\n  return key !== '__proto__';\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class Deferred<R> {\n  promise: Promise<R>;\n  reject: (value?: unknown) => void = () => {};\n  resolve: (value?: unknown) => void = () => {};\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve as (value?: unknown) => void;\n      this.reject = reject as (value?: unknown) => void;\n    });\n  }\n\n  /**\n   * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\n   * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\n   * and returns a node-style callback which will resolve or reject the Deferred's promise.\n   */\n  wrapCallback(\n    callback?: (error?: unknown, value?: unknown) => void\n  ): (error: unknown, value?: unknown) => void {\n    return (error, value?) => {\n      if (error) {\n        this.reject(error);\n      } else {\n        this.resolve(value);\n      }\n      if (typeof callback === 'function') {\n        // Attaching noop handler just in case developer wasn't expecting\n        // promises\n        this.promise.catch(() => {});\n\n        // Some of our callbacks don't expect a value and our own tests\n        // assert that the parameter length is 1\n        if (callback.length === 1) {\n          callback(error);\n        } else {\n          callback(error, value);\n        }\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64urlEncodeWithoutPadding } from './crypt';\n\n// Firebase Auth tokens contain snake_case claims following the JWT standard / convention.\n/* eslint-disable camelcase */\n\nexport type FirebaseSignInProvider =\n  | 'custom'\n  | 'email'\n  | 'password'\n  | 'phone'\n  | 'anonymous'\n  | 'google.com'\n  | 'facebook.com'\n  | 'github.com'\n  | 'twitter.com'\n  | 'microsoft.com'\n  | 'apple.com';\n\ninterface FirebaseIdToken {\n  // Always set to https://securetoken.google.com/PROJECT_ID\n  iss: string;\n\n  // Always set to PROJECT_ID\n  aud: string;\n\n  // The user's unique ID\n  sub: string;\n\n  // The token issue time, in seconds since epoch\n  iat: number;\n\n  // The token expiry time, normally 'iat' + 3600\n  exp: number;\n\n  // The user's unique ID. Must be equal to 'sub'\n  user_id: string;\n\n  // The time the user authenticated, normally 'iat'\n  auth_time: number;\n\n  // The sign in provider, only set when the provider is 'anonymous'\n  provider_id?: 'anonymous';\n\n  // The user's primary email\n  email?: string;\n\n  // The user's email verification status\n  email_verified?: boolean;\n\n  // The user's primary phone number\n  phone_number?: string;\n\n  // The user's display name\n  name?: string;\n\n  // The user's profile photo URL\n  picture?: string;\n\n  // Information on all identities linked to this user\n  firebase: {\n    // The primary sign-in provider\n    sign_in_provider: FirebaseSignInProvider;\n\n    // A map of providers to the user's list of unique identifiers from\n    // each provider\n    identities?: { [provider in FirebaseSignInProvider]?: string[] };\n  };\n\n  // Custom claims set by the developer\n  [claim: string]: unknown;\n\n  uid?: never; // Try to catch a common mistake of \"uid\" (should be \"sub\" instead).\n}\n\nexport type EmulatorMockTokenOptions = ({ user_id: string } | { sub: string }) &\n  Partial<FirebaseIdToken>;\n\nexport function createMockUserToken(\n  token: EmulatorMockTokenOptions,\n  projectId?: string\n): string {\n  if (token.uid) {\n    throw new Error(\n      'The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.'\n    );\n  }\n  // Unsecured JWTs use \"none\" as the algorithm.\n  const header = {\n    alg: 'none',\n    type: 'JWT'\n  };\n\n  const project = projectId || 'demo-project';\n  const iat = token.iat || 0;\n  const sub = token.sub || token.user_id;\n  if (!sub) {\n    throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\n  }\n\n  const payload: FirebaseIdToken = {\n    // Set all required fields to decent defaults\n    iss: `https://securetoken.google.com/${project}`,\n    aud: project,\n    iat,\n    exp: iat + 3600,\n    auth_time: iat,\n    sub,\n    user_id: sub,\n    firebase: {\n      sign_in_provider: 'custom',\n      identities: {}\n    },\n\n    // Override with user options\n    ...token\n  };\n\n  // Unsecured JWTs use the empty string as a signature.\n  const signature = '';\n  return [\n    base64urlEncodeWithoutPadding(JSON.stringify(header)),\n    base64urlEncodeWithoutPadding(JSON.stringify(payload)),\n    signature\n  ].join('.');\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\n\n/**\n * Returns navigator.userAgent string or '' if it's not defined.\n * @return user agent string\n */\nexport function getUA(): string {\n  if (\n    typeof navigator !== 'undefined' &&\n    typeof navigator['userAgent'] === 'string'\n  ) {\n    return navigator['userAgent'];\n  } else {\n    return '';\n  }\n}\n\n/**\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\n *\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\n * wait for a callback.\n */\nexport function isMobileCordova(): boolean {\n  return (\n    typeof window !== 'undefined' &&\n    // @ts-ignore Setting up an broadly applicable index signature for Window\n    // just to deal with this case would probably be a bad idea.\n    !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\n    /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())\n  );\n}\n\n/**\n * Detect Node.js.\n *\n * @return true if Node.js environment is detected.\n */\n// Node detection logic from: https://github.com/iliakan/detect-node/\nexport function isNode(): boolean {\n  try {\n    return (\n      Object.prototype.toString.call(global.process) === '[object process]'\n    );\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Detect Browser Environment\n */\nexport function isBrowser(): boolean {\n  return typeof self === 'object' && self.self === self;\n}\n\n/**\n * Detect browser extensions (Chrome and Firefox at least).\n */\ninterface BrowserRuntime {\n  id?: unknown;\n}\ndeclare const chrome: { runtime?: BrowserRuntime };\ndeclare const browser: { runtime?: BrowserRuntime };\nexport function isBrowserExtension(): boolean {\n  const runtime =\n    typeof chrome === 'object'\n      ? chrome.runtime\n      : typeof browser === 'object'\n      ? browser.runtime\n      : undefined;\n  return typeof runtime === 'object' && runtime.id !== undefined;\n}\n\n/**\n * Detect React Native.\n *\n * @return true if ReactNative environment is detected.\n */\nexport function isReactNative(): boolean {\n  return (\n    typeof navigator === 'object' && navigator['product'] === 'ReactNative'\n  );\n}\n\n/** Detects Electron apps. */\nexport function isElectron(): boolean {\n  return getUA().indexOf('Electron/') >= 0;\n}\n\n/** Detects Internet Explorer. */\nexport function isIE(): boolean {\n  const ua = getUA();\n  return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\n}\n\n/** Detects Universal Windows Platform apps. */\nexport function isUWP(): boolean {\n  return getUA().indexOf('MSAppHost/') >= 0;\n}\n\n/**\n * Detect whether the current SDK build is the Node version.\n *\n * @return true if it's the Node SDK build.\n */\nexport function isNodeSdk(): boolean {\n  return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\n}\n\n/** Returns true if we are running in Safari. */\nexport function isSafari(): boolean {\n  return (\n    !isNode() &&\n    navigator.userAgent.includes('Safari') &&\n    !navigator.userAgent.includes('Chrome')\n  );\n}\n\n/**\n * This method checks if indexedDB is supported by current browser/service worker context\n * @return true if indexedDB is supported by current browser/service worker context\n */\nexport function isIndexedDBAvailable(): boolean {\n  return typeof indexedDB === 'object';\n}\n\n/**\n * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject\n * if errors occur during the database open operation.\n *\n * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox\n * private browsing)\n */\nexport function validateIndexedDBOpenable(): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    try {\n      let preExist: boolean = true;\n      const DB_CHECK_NAME =\n        'validate-browser-context-for-indexeddb-analytics-module';\n      const request = self.indexedDB.open(DB_CHECK_NAME);\n      request.onsuccess = () => {\n        request.result.close();\n        // delete database only when it doesn't pre-exist\n        if (!preExist) {\n          self.indexedDB.deleteDatabase(DB_CHECK_NAME);\n        }\n        resolve(true);\n      };\n      request.onupgradeneeded = () => {\n        preExist = false;\n      };\n\n      request.onerror = () => {\n        reject(request.error?.message || '');\n      };\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n\n/**\n *\n * This method checks whether cookie is enabled within current browser\n * @return true if cookie is enabled within current browser\n */\nexport function areCookiesEnabled(): boolean {\n  if (typeof navigator === 'undefined' || !navigator.cookieEnabled) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Polyfill for `globalThis` object.\n * @returns the `globalThis` object for the given environment.\n */\nexport function getGlobal(): typeof globalThis {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('Unable to locate global object.');\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Standardized Firebase Error.\n *\n * Usage:\n *\n *   // Typescript string literals for type-safe codes\n *   type Err =\n *     'unknown' |\n *     'object-not-found'\n *     ;\n *\n *   // Closure enum for type-safe error codes\n *   // at-enum {string}\n *   var Err = {\n *     UNKNOWN: 'unknown',\n *     OBJECT_NOT_FOUND: 'object-not-found',\n *   }\n *\n *   let errors: Map<Err, string> = {\n *     'generic-error': \"Unknown error\",\n *     'file-not-found': \"Could not find file: {$file}\",\n *   };\n *\n *   // Type-safe function - must pass a valid error code as param.\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\n *\n *   ...\n *   throw error.create(Err.GENERIC);\n *   ...\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\n *   ...\n *   // Service: Could not file file: foo.txt (service/file-not-found).\n *\n *   catch (e) {\n *     assert(e.message === \"Could not find file: foo.txt.\");\n *     if (e.code === 'service/file-not-found') {\n *       console.log(\"Could not read file: \" + e['file']);\n *     }\n *   }\n */\n\nexport type ErrorMap<ErrorCode extends string> = {\n  readonly [K in ErrorCode]: string;\n};\n\nconst ERROR_NAME = 'FirebaseError';\n\nexport interface StringLike {\n  toString(): string;\n}\n\nexport interface ErrorData {\n  [key: string]: unknown;\n}\n\n// Based on code from:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\nexport class FirebaseError extends Error {\n  /** The custom name for all FirebaseErrors. */\n  readonly name: string = ERROR_NAME;\n\n  constructor(\n    /** The error code for this error. */\n    readonly code: string,\n    message: string,\n    /** Custom data for this error. */\n    public customData?: Record<string, unknown>\n  ) {\n    super(message);\n\n    // Fix For ES5\n    // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    Object.setPrototypeOf(this, FirebaseError.prototype);\n\n    // Maintains proper stack trace for where our error was thrown.\n    // Only available on V8.\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ErrorFactory.prototype.create);\n    }\n  }\n}\n\nexport class ErrorFactory<\n  ErrorCode extends string,\n  ErrorParams extends { readonly [K in ErrorCode]?: ErrorData } = {}\n> {\n  constructor(\n    private readonly service: string,\n    private readonly serviceName: string,\n    private readonly errors: ErrorMap<ErrorCode>\n  ) {}\n\n  create<K extends ErrorCode>(\n    code: K,\n    ...data: K extends keyof ErrorParams ? [ErrorParams[K]] : []\n  ): FirebaseError {\n    const customData = (data[0] as ErrorData) || {};\n    const fullCode = `${this.service}/${code}`;\n    const template = this.errors[code];\n\n    const message = template ? replaceTemplate(template, customData) : 'Error';\n    // Service Name: Error message (service/code).\n    const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\n\n    const error = new FirebaseError(fullCode, fullMessage, customData);\n\n    return error;\n  }\n}\n\nfunction replaceTemplate(template: string, data: ErrorData): string {\n  return template.replace(PATTERN, (_, key) => {\n    const value = data[key];\n    return value != null ? String(value) : `<${key}?>`;\n  });\n}\n\nconst PATTERN = /\\{\\$([^}]+)}/g;\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Evaluates a JSON string into a javascript object.\n *\n * @param {string} str A string containing JSON.\n * @return {*} The javascript object representing the specified JSON.\n */\nexport function jsonEval(str: string): unknown {\n  return JSON.parse(str);\n}\n\n/**\n * Returns JSON representing a javascript object.\n * @param {*} data Javascript object to be stringified.\n * @return {string} The JSON contents of the object.\n */\nexport function stringify(data: unknown): string {\n  return JSON.stringify(data);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Decode } from './crypt';\nimport { jsonEval } from './json';\n\ninterface Claims {\n  [key: string]: {};\n}\n\ninterface DecodedToken {\n  header: object;\n  claims: Claims;\n  data: object;\n  signature: string;\n}\n\n/**\n * Decodes a Firebase auth. token into constituent parts.\n *\n * Notes:\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const decode = function (token: string): DecodedToken {\n  let header = {},\n    claims: Claims = {},\n    data = {},\n    signature = '';\n\n  try {\n    const parts = token.split('.');\n    header = jsonEval(base64Decode(parts[0]) || '') as object;\n    claims = jsonEval(base64Decode(parts[1]) || '') as Claims;\n    signature = parts[2];\n    data = claims['d'] || {};\n    delete claims['d'];\n  } catch (e) {}\n\n  return {\n    header,\n    claims,\n    data,\n    signature\n  };\n};\n\ninterface DecodedToken {\n  header: object;\n  claims: Claims;\n  data: object;\n  signature: string;\n}\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isValidTimestamp = function (token: string): boolean {\n  const claims: Claims = decode(token).claims;\n  const now: number = Math.floor(new Date().getTime() / 1000);\n  let validSince: number = 0,\n    validUntil: number = 0;\n\n  if (typeof claims === 'object') {\n    if (claims.hasOwnProperty('nbf')) {\n      validSince = claims['nbf'] as number;\n    } else if (claims.hasOwnProperty('iat')) {\n      validSince = claims['iat'] as number;\n    }\n\n    if (claims.hasOwnProperty('exp')) {\n      validUntil = claims['exp'] as number;\n    } else {\n      // token will expire after 24h by default\n      validUntil = validSince + 86400;\n    }\n  }\n\n  return (\n    !!now &&\n    !!validSince &&\n    !!validUntil &&\n    now >= validSince &&\n    now <= validUntil\n  );\n};\n\n/**\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\n *\n * Notes:\n * - May return null if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const issuedAtTime = function (token: string): number | null {\n  const claims: Claims = decode(token).claims;\n  if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\n    return claims['iat'] as number;\n  }\n  return null;\n};\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isValidFormat = function (token: string): boolean {\n  const decoded = decode(token),\n    claims = decoded.claims;\n\n  return !!claims && typeof claims === 'object' && claims.hasOwnProperty('iat');\n};\n\n/**\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isAdmin = function (token: string): boolean {\n  const claims: Claims = decode(token).claims;\n  return typeof claims === 'object' && claims['admin'] === true;\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function contains<T extends object>(obj: T, key: string): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexport function safeGet<T extends object, K extends keyof T>(\n  obj: T,\n  key: K\n): T[K] | undefined {\n  if (Object.prototype.hasOwnProperty.call(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\nexport function isEmpty(obj: object): obj is {} {\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function map<K extends string, V, U>(\n  obj: { [key in K]: V },\n  fn: (value: V, key: K, obj: { [key in K]: V }) => U,\n  contextObj?: unknown\n): { [key in K]: U } {\n  const res: Partial<{ [key in K]: U }> = {};\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      res[key] = fn.call(contextObj, obj[key], key, obj);\n    }\n  }\n  return res as { [key in K]: U };\n}\n\n/**\n * Deep equal two objects. Support Arrays and Objects.\n */\nexport function deepEqual(a: object, b: object): boolean {\n  if (a === b) {\n    return true;\n  }\n\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  for (const k of aKeys) {\n    if (!bKeys.includes(k)) {\n      return false;\n    }\n\n    const aProp = (a as Record<string, unknown>)[k];\n    const bProp = (b as Record<string, unknown>)[k];\n    if (isObject(aProp) && isObject(bProp)) {\n      if (!deepEqual(aProp, bProp)) {\n        return false;\n      }\n    } else if (aProp !== bProp) {\n      return false;\n    }\n  }\n\n  for (const k of bKeys) {\n    if (!aKeys.includes(k)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction isObject(thing: unknown): thing is object {\n  return thing !== null && typeof thing === 'object';\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a\n * params object (e.g. {arg: 'val', arg2: 'val2'})\n * Note: You must prepend it with ? when adding it to a URL.\n */\nexport function querystring(querystringParams: {\n  [key: string]: string | number;\n}): string {\n  const params = [];\n  for (const [key, value] of Object.entries(querystringParams)) {\n    if (Array.isArray(value)) {\n      value.forEach(arrayVal => {\n        params.push(\n          encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal)\n        );\n      });\n    } else {\n      params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    }\n  }\n  return params.length ? '&' + params.join('&') : '';\n}\n\n/**\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object\n * (e.g. {arg: 'val', arg2: 'val2'})\n */\nexport function querystringDecode(querystring: string): Record<string, string> {\n  const obj: Record<string, string> = {};\n  const tokens = querystring.replace(/^\\?/, '').split('&');\n\n  tokens.forEach(token => {\n    if (token) {\n      const [key, value] = token.split('=');\n      obj[decodeURIComponent(key)] = decodeURIComponent(value);\n    }\n  });\n  return obj;\n}\n\n/**\n * Extract the query string part of a URL, including the leading question mark (if present).\n */\nexport function extractQuerystring(url: string): string {\n  const queryStart = url.indexOf('?');\n  if (!queryStart) {\n    return '';\n  }\n  const fragmentStart = url.indexOf('#', queryStart);\n  return url.substring(\n    queryStart,\n    fragmentStart > 0 ? fragmentStart : undefined\n  );\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview SHA-1 cryptographic hash.\n * Variable names follow the notation in FIPS PUB 180-3:\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\n *\n * Usage:\n *   var sha1 = new sha1();\n *   sha1.update(bytes);\n *   var hash = sha1.digest();\n *\n * Performance:\n *   Chrome 23:   ~400 Mbit/s\n *   Firefox 16:  ~250 Mbit/s\n *\n */\n\n/**\n * SHA-1 cryptographic hash constructor.\n *\n * The properties declared here are discussed in the above algorithm document.\n * @constructor\n * @final\n * @struct\n */\nexport class Sha1 {\n  /**\n   * Holds the previous values of accumulated variables a-e in the compress_\n   * function.\n   * @private\n   */\n  private chain_: number[] = [];\n\n  /**\n   * A buffer holding the partially computed hash result.\n   * @private\n   */\n  private buf_: number[] = [];\n\n  /**\n   * An array of 80 bytes, each a part of the message to be hashed.  Referred to\n   * as the message schedule in the docs.\n   * @private\n   */\n  private W_: number[] = [];\n\n  /**\n   * Contains data needed to pad messages less than 64 bytes.\n   * @private\n   */\n  private pad_: number[] = [];\n\n  /**\n   * @private {number}\n   */\n  private inbuf_: number = 0;\n\n  /**\n   * @private {number}\n   */\n  private total_: number = 0;\n\n  blockSize: number;\n\n  constructor() {\n    this.blockSize = 512 / 8;\n\n    this.pad_[0] = 128;\n    for (let i = 1; i < this.blockSize; ++i) {\n      this.pad_[i] = 0;\n    }\n\n    this.reset();\n  }\n\n  reset(): void {\n    this.chain_[0] = 0x67452301;\n    this.chain_[1] = 0xefcdab89;\n    this.chain_[2] = 0x98badcfe;\n    this.chain_[3] = 0x10325476;\n    this.chain_[4] = 0xc3d2e1f0;\n\n    this.inbuf_ = 0;\n    this.total_ = 0;\n  }\n\n  /**\n   * Internal compress helper function.\n   * @param buf Block to compress.\n   * @param offset Offset of the block in the buffer.\n   * @private\n   */\n  compress_(buf: number[] | Uint8Array | string, offset?: number): void {\n    if (!offset) {\n      offset = 0;\n    }\n\n    const W = this.W_;\n\n    // get 16 big endian words\n    if (typeof buf === 'string') {\n      for (let i = 0; i < 16; i++) {\n        // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\n        // have a bug that turns the post-increment ++ operator into pre-increment\n        // during JIT compilation.  We have code that depends heavily on SHA-1 for\n        // correctness and which is affected by this bug, so I've removed all uses\n        // of post-increment ++ in which the result value is used.  We can revert\n        // this change once the Safari bug\n        // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\n        // most clients have been updated.\n        W[i] =\n          (buf.charCodeAt(offset) << 24) |\n          (buf.charCodeAt(offset + 1) << 16) |\n          (buf.charCodeAt(offset + 2) << 8) |\n          buf.charCodeAt(offset + 3);\n        offset += 4;\n      }\n    } else {\n      for (let i = 0; i < 16; i++) {\n        W[i] =\n          (buf[offset] << 24) |\n          (buf[offset + 1] << 16) |\n          (buf[offset + 2] << 8) |\n          buf[offset + 3];\n        offset += 4;\n      }\n    }\n\n    // expand to 80 words\n    for (let i = 16; i < 80; i++) {\n      const t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n      W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\n    }\n\n    let a = this.chain_[0];\n    let b = this.chain_[1];\n    let c = this.chain_[2];\n    let d = this.chain_[3];\n    let e = this.chain_[4];\n    let f, k;\n\n    // TODO(user): Try to unroll this loop to speed up the computation.\n    for (let i = 0; i < 80; i++) {\n      if (i < 40) {\n        if (i < 20) {\n          f = d ^ (b & (c ^ d));\n          k = 0x5a827999;\n        } else {\n          f = b ^ c ^ d;\n          k = 0x6ed9eba1;\n        }\n      } else {\n        if (i < 60) {\n          f = (b & c) | (d & (b | c));\n          k = 0x8f1bbcdc;\n        } else {\n          f = b ^ c ^ d;\n          k = 0xca62c1d6;\n        }\n      }\n\n      const t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\n      e = d;\n      d = c;\n      c = ((b << 30) | (b >>> 2)) & 0xffffffff;\n      b = a;\n      a = t;\n    }\n\n    this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\n    this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\n    this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\n    this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\n    this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\n  }\n\n  update(bytes?: number[] | Uint8Array | string, length?: number): void {\n    // TODO(johnlenz): tighten the function signature and remove this check\n    if (bytes == null) {\n      return;\n    }\n\n    if (length === undefined) {\n      length = bytes.length;\n    }\n\n    const lengthMinusBlock = length - this.blockSize;\n    let n = 0;\n    // Using local instead of member variables gives ~5% speedup on Firefox 16.\n    const buf = this.buf_;\n    let inbuf = this.inbuf_;\n\n    // The outer while loop should execute at most twice.\n    while (n < length) {\n      // When we have no data in the block to top up, we can directly process the\n      // input buffer (assuming it contains sufficient data). This gives ~25%\n      // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\n      // the data is provided in large chunks (or in multiples of 64 bytes).\n      if (inbuf === 0) {\n        while (n <= lengthMinusBlock) {\n          this.compress_(bytes, n);\n          n += this.blockSize;\n        }\n      }\n\n      if (typeof bytes === 'string') {\n        while (n < length) {\n          buf[inbuf] = bytes.charCodeAt(n);\n          ++inbuf;\n          ++n;\n          if (inbuf === this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      } else {\n        while (n < length) {\n          buf[inbuf] = bytes[n];\n          ++inbuf;\n          ++n;\n          if (inbuf === this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      }\n    }\n\n    this.inbuf_ = inbuf;\n    this.total_ += length;\n  }\n\n  /** @override */\n  digest(): number[] {\n    const digest: number[] = [];\n    let totalBits = this.total_ * 8;\n\n    // Add pad 0x80 0x00*.\n    if (this.inbuf_ < 56) {\n      this.update(this.pad_, 56 - this.inbuf_);\n    } else {\n      this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\n    }\n\n    // Add # bits.\n    for (let i = this.blockSize - 1; i >= 56; i--) {\n      this.buf_[i] = totalBits & 255;\n      totalBits /= 256; // Don't use bit-shifting here!\n    }\n\n    this.compress_(this.buf_);\n\n    let n = 0;\n    for (let i = 0; i < 5; i++) {\n      for (let j = 24; j >= 0; j -= 8) {\n        digest[n] = (this.chain_[i] >> j) & 255;\n        ++n;\n      }\n    }\n    return digest;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport type NextFn<T> = (value: T) => void;\nexport type ErrorFn = (error: Error) => void;\nexport type CompleteFn = () => void;\n\nexport interface Observer<T> {\n  // Called once for each value in a stream of values.\n  next: NextFn<T>;\n\n  // A stream terminates by a single call to EITHER error() or complete().\n  error: ErrorFn;\n\n  // No events will be sent to next() once complete() is called.\n  complete: CompleteFn;\n}\n\nexport type PartialObserver<T> = Partial<Observer<T>>;\n\n// TODO: Support also Unsubscribe.unsubscribe?\nexport type Unsubscribe = () => void;\n\n/**\n * The Subscribe interface has two forms - passing the inline function\n * callbacks, or a object interface with callback properties.\n */\nexport interface Subscribe<T> {\n  (next?: NextFn<T>, error?: ErrorFn, complete?: CompleteFn): Unsubscribe;\n  (observer: PartialObserver<T>): Unsubscribe;\n}\n\nexport interface Observable<T> {\n  // Subscribe method\n  subscribe: Subscribe<T>;\n}\n\nexport type Executor<T> = (observer: Observer<T>) => void;\n\n/**\n * Helper to make a Subscribe function (just like Promise helps make a\n * Thenable).\n *\n * @param executor Function which can make calls to a single Observer\n *     as a proxy.\n * @param onNoObservers Callback when count of Observers goes to zero.\n */\nexport function createSubscribe<T>(\n  executor: Executor<T>,\n  onNoObservers?: Executor<T>\n): Subscribe<T> {\n  const proxy = new ObserverProxy<T>(executor, onNoObservers);\n  return proxy.subscribe.bind(proxy);\n}\n\n/**\n * Implement fan-out for any number of Observers attached via a subscribe\n * function.\n */\nclass ObserverProxy<T> implements Observer<T> {\n  private observers: Array<Observer<T>> | undefined = [];\n  private unsubscribes: Unsubscribe[] = [];\n  private onNoObservers: Executor<T> | undefined;\n  private observerCount = 0;\n  // Micro-task scheduling by calling task.then().\n  private task = Promise.resolve();\n  private finalized = false;\n  private finalError?: Error;\n\n  /**\n   * @param executor Function which can make calls to a single Observer\n   *     as a proxy.\n   * @param onNoObservers Callback when count of Observers goes to zero.\n   */\n  constructor(executor: Executor<T>, onNoObservers?: Executor<T>) {\n    this.onNoObservers = onNoObservers;\n    // Call the executor asynchronously so subscribers that are called\n    // synchronously after the creation of the subscribe function\n    // can still receive the very first value generated in the executor.\n    this.task\n      .then(() => {\n        executor(this);\n      })\n      .catch(e => {\n        this.error(e);\n      });\n  }\n\n  next(value: T): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.next(value);\n    });\n  }\n\n  error(error: Error): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.error(error);\n    });\n    this.close(error);\n  }\n\n  complete(): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.complete();\n    });\n    this.close();\n  }\n\n  /**\n   * Subscribe function that can be used to add an Observer to the fan-out list.\n   *\n   * - We require that no event is sent to a subscriber sychronously to their\n   *   call to subscribe().\n   */\n  subscribe(\n    nextOrObserver?: NextFn<T> | PartialObserver<T>,\n    error?: ErrorFn,\n    complete?: CompleteFn\n  ): Unsubscribe {\n    let observer: Observer<T>;\n\n    if (\n      nextOrObserver === undefined &&\n      error === undefined &&\n      complete === undefined\n    ) {\n      throw new Error('Missing Observer.');\n    }\n\n    // Assemble an Observer object when passed as callback functions.\n    if (\n      implementsAnyMethods(nextOrObserver as { [key: string]: unknown }, [\n        'next',\n        'error',\n        'complete'\n      ])\n    ) {\n      observer = nextOrObserver as Observer<T>;\n    } else {\n      observer = {\n        next: nextOrObserver as NextFn<T>,\n        error,\n        complete\n      } as Observer<T>;\n    }\n\n    if (observer.next === undefined) {\n      observer.next = noop as NextFn<T>;\n    }\n    if (observer.error === undefined) {\n      observer.error = noop as ErrorFn;\n    }\n    if (observer.complete === undefined) {\n      observer.complete = noop as CompleteFn;\n    }\n\n    const unsub = this.unsubscribeOne.bind(this, this.observers!.length);\n\n    // Attempt to subscribe to a terminated Observable - we\n    // just respond to the Observer with the final error or complete\n    // event.\n    if (this.finalized) {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      this.task.then(() => {\n        try {\n          if (this.finalError) {\n            observer.error(this.finalError);\n          } else {\n            observer.complete();\n          }\n        } catch (e) {\n          // nothing\n        }\n        return;\n      });\n    }\n\n    this.observers!.push(observer as Observer<T>);\n\n    return unsub;\n  }\n\n  // Unsubscribe is synchronous - we guarantee that no events are sent to\n  // any unsubscribed Observer.\n  private unsubscribeOne(i: number): void {\n    if (this.observers === undefined || this.observers[i] === undefined) {\n      return;\n    }\n\n    delete this.observers[i];\n\n    this.observerCount -= 1;\n    if (this.observerCount === 0 && this.onNoObservers !== undefined) {\n      this.onNoObservers(this);\n    }\n  }\n\n  private forEachObserver(fn: (observer: Observer<T>) => void): void {\n    if (this.finalized) {\n      // Already closed by previous event....just eat the additional values.\n      return;\n    }\n\n    // Since sendOne calls asynchronously - there is no chance that\n    // this.observers will become undefined.\n    for (let i = 0; i < this.observers!.length; i++) {\n      this.sendOne(i, fn);\n    }\n  }\n\n  // Call the Observer via one of it's callback function. We are careful to\n  // confirm that the observe has not been unsubscribed since this asynchronous\n  // function had been queued.\n  private sendOne(i: number, fn: (observer: Observer<T>) => void): void {\n    // Execute the callback asynchronously\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.task.then(() => {\n      if (this.observers !== undefined && this.observers[i] !== undefined) {\n        try {\n          fn(this.observers[i]);\n        } catch (e) {\n          // Ignore exceptions raised in Observers or missing methods of an\n          // Observer.\n          // Log error to console. b/31404806\n          if (typeof console !== 'undefined' && console.error) {\n            console.error(e);\n          }\n        }\n      }\n    });\n  }\n\n  private close(err?: Error): void {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    if (err !== undefined) {\n      this.finalError = err;\n    }\n    // Proxy is no longer needed - garbage collect references\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.task.then(() => {\n      this.observers = undefined;\n      this.onNoObservers = undefined;\n    });\n  }\n}\n\n/** Turn synchronous function into one called asynchronously. */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function async(fn: Function, onError?: ErrorFn): Function {\n  return (...args: unknown[]) => {\n    Promise.resolve(true)\n      .then(() => {\n        fn(...args);\n      })\n      .catch((error: Error) => {\n        if (onError) {\n          onError(error);\n        }\n      });\n  };\n}\n\n/**\n * Return true if the object passed in implements any of the named methods.\n */\nfunction implementsAnyMethods(\n  obj: { [key: string]: unknown },\n  methods: string[]\n): boolean {\n  if (typeof obj !== 'object' || obj === null) {\n    return false;\n  }\n\n  for (const method of methods) {\n    if (method in obj && typeof obj[method] === 'function') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction noop(): void {\n  // do nothing\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Check to make sure the appropriate number of arguments are provided for a public function.\n * Throws an error if it fails.\n *\n * @param fnName The function name\n * @param minCount The minimum number of arguments to allow for the function call\n * @param maxCount The maximum number of argument to allow for the function call\n * @param argCount The actual number of arguments provided.\n */\nexport const validateArgCount = function (\n  fnName: string,\n  minCount: number,\n  maxCount: number,\n  argCount: number\n): void {\n  let argError;\n  if (argCount < minCount) {\n    argError = 'at least ' + minCount;\n  } else if (argCount > maxCount) {\n    argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\n  }\n  if (argError) {\n    const error =\n      fnName +\n      ' failed: Was called with ' +\n      argCount +\n      (argCount === 1 ? ' argument.' : ' arguments.') +\n      ' Expects ' +\n      argError +\n      '.';\n    throw new Error(error);\n  }\n};\n\n/**\n * Generates a string to prefix an error message about failed argument validation\n *\n * @param fnName The function name\n * @param argName The name of the argument\n * @return The prefix to add to the error thrown for validation.\n */\nexport function errorPrefix(fnName: string, argName: string): string {\n  return `${fnName} failed: ${argName} argument `;\n}\n\n/**\n * @param fnName\n * @param argumentNumber\n * @param namespace\n * @param optional\n */\nexport function validateNamespace(\n  fnName: string,\n  namespace: string,\n  optional: boolean\n): void {\n  if (optional && !namespace) {\n    return;\n  }\n  if (typeof namespace !== 'string') {\n    //TODO: I should do more validation here. We only allow certain chars in namespaces.\n    throw new Error(\n      errorPrefix(fnName, 'namespace') + 'must be a valid firebase namespace.'\n    );\n  }\n}\n\nexport function validateCallback(\n  fnName: string,\n  argumentName: string,\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  callback: Function,\n  optional: boolean\n): void {\n  if (optional && !callback) {\n    return;\n  }\n  if (typeof callback !== 'function') {\n    throw new Error(\n      errorPrefix(fnName, argumentName) + 'must be a valid function.'\n    );\n  }\n}\n\nexport function validateContextObject(\n  fnName: string,\n  argumentName: string,\n  context: unknown,\n  optional: boolean\n): void {\n  if (optional && !context) {\n    return;\n  }\n  if (typeof context !== 'object' || context === null) {\n    throw new Error(\n      errorPrefix(fnName, argumentName) + 'must be a valid context object.'\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from './assert';\n\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\n// so it's been modified.\n\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\n// pair).\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\n\n/**\n * @param {string} str\n * @return {Array}\n */\nexport const stringToByteArray = function (str: string): number[] {\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n\n    // Is this the lead surrogate in a surrogate pair?\n    if (c >= 0xd800 && c <= 0xdbff) {\n      const high = c - 0xd800; // the high 10 bits.\n      i++;\n      assert(i < str.length, 'Surrogate pair missing trail surrogate.');\n      const low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\n      c = 0x10000 + (high << 10) + low;\n    }\n\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (c < 65536) {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Calculate length without actually converting; useful for doing cheaper validation.\n * @param {string} str\n * @return {number}\n */\nexport const stringLength = function (str: string): number {\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    const c = str.charCodeAt(i);\n    if (c < 128) {\n      p++;\n    } else if (c < 2048) {\n      p += 2;\n    } else if (c >= 0xd800 && c <= 0xdbff) {\n      // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\n      p += 4;\n      i++; // skip trail surrogate.\n    } else {\n      p += 3;\n    }\n  }\n  return p;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The amount of milliseconds to exponentially increase.\n */\nconst DEFAULT_INTERVAL_MILLIS = 1000;\n\n/**\n * The factor to backoff by.\n * Should be a number greater than 1.\n */\nconst DEFAULT_BACKOFF_FACTOR = 2;\n\n/**\n * The maximum milliseconds to increase to.\n *\n * <p>Visible for testing\n */\nexport const MAX_VALUE_MILLIS = 4 * 60 * 60 * 1000; // Four hours, like iOS and Android.\n\n/**\n * The percentage of backoff time to randomize by.\n * See\n * http://go/safe-client-behavior#step-1-determine-the-appropriate-retry-interval-to-handle-spike-traffic\n * for context.\n *\n * <p>Visible for testing\n */\nexport const RANDOM_FACTOR = 0.5;\n\n/**\n * Based on the backoff method from\n * https://github.com/google/closure-library/blob/master/closure/goog/math/exponentialbackoff.js.\n * Extracted here so we don't need to pass metadata and a stateful ExponentialBackoff object around.\n */\nexport function calculateBackoffMillis(\n  backoffCount: number,\n  intervalMillis: number = DEFAULT_INTERVAL_MILLIS,\n  backoffFactor: number = DEFAULT_BACKOFF_FACTOR\n): number {\n  // Calculates an exponentially increasing value.\n  // Deviation: calculates value from count and a constant interval, so we only need to save value\n  // and count to restore state.\n  const currBaseValue = intervalMillis * Math.pow(backoffFactor, backoffCount);\n\n  // A random \"fuzz\" to avoid waves of retries.\n  // Deviation: randomFactor is required.\n  const randomWait = Math.round(\n    // A fraction of the backoff value to add/subtract.\n    // Deviation: changes multiplication order to improve readability.\n    RANDOM_FACTOR *\n      currBaseValue *\n      // A random float (rounded to int by Math.round above) in the range [-1, 1]. Determines\n      // if we add or subtract.\n      (Math.random() - 0.5) *\n      2\n  );\n\n  // Limits backoff to max to avoid effectively permanent backoff.\n  return Math.min(MAX_VALUE_MILLIS, currBaseValue + randomWait);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Provide English ordinal letters after a number\n */\nexport function ordinal(i: number): string {\n  if (!Number.isFinite(i)) {\n    return `${i}`;\n  }\n  return i + indicator(i);\n}\n\nfunction indicator(i: number): string {\n  i = Math.abs(i);\n  const cent = i % 100;\n  if (cent >= 10 && cent <= 20) {\n    return 'th';\n  }\n  const dec = i % 10;\n  if (dec === 1) {\n    return 'st';\n  }\n  if (dec === 2) {\n    return 'nd';\n  }\n  if (dec === 3) {\n    return 'rd';\n  }\n  return 'th';\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface Compat<T> {\n  _delegate: T;\n}\n\nexport function getModularInstance<ExpService>(\n  service: Compat<ExpService> | ExpService\n): ExpService {\n  if (service && (service as Compat<ExpService>)._delegate) {\n    return (service as Compat<ExpService>)._delegate;\n  } else {\n    return service as ExpService;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Provider } from './provider';\nimport { Component } from './component';\nimport { Name } from './types';\n\n/**\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\n */\nexport class ComponentContainer {\n  private readonly providers = new Map<string, Provider<Name>>();\n\n  constructor(private readonly name: string) {}\n\n  /**\n   *\n   * @param component Component being added\n   * @param overwrite When a component with the same name has already been registered,\n   * if overwrite is true: overwrite the existing component with the new component and create a new\n   * provider with the new component. It can be useful in tests where you want to use different mocks\n   * for different tests.\n   * if overwrite is false: throw an exception\n   */\n  addComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      throw new Error(\n        `Component ${component.name} has already been registered with ${this.name}`\n      );\n    }\n\n    provider.setComponent(component);\n  }\n\n  addOrOverwriteComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      // delete the existing provider from the container, so we can register the new component\n      this.providers.delete(component.name);\n    }\n\n    this.addComponent(component);\n  }\n\n  /**\n   * getProvider provides a type safe interface where it can only be called with a field name\n   * present in NameServiceMapping interface.\n   *\n   * Firebase SDKs providing services should extend NameServiceMapping interface to register\n   * themselves.\n   */\n  getProvider<T extends Name>(name: T): Provider<T> {\n    if (this.providers.has(name)) {\n      return this.providers.get(name) as unknown as Provider<T>;\n    }\n\n    // create a Provider for a service that hasn't registered with Firebase\n    const provider = new Provider<T>(name, this);\n    this.providers.set(name, provider as unknown as Provider<Name>);\n\n    return provider as Provider<T>;\n  }\n\n  getProviders(): Array<Provider<Name>> {\n    return Array.from(this.providers.values());\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  InstantiationMode,\n  InstanceFactory,\n  ComponentType,\n  Dictionary,\n  Name,\n  onInstanceCreatedCallback\n} from './types';\n\n/**\n * Component for service name T, e.g. `auth`, `auth-internal`\n */\nexport class Component<T extends Name = Name> {\n  multipleInstances = false;\n  /**\n   * Properties to be added to the service namespace\n   */\n  serviceProps: Dictionary = {};\n\n  instantiationMode = InstantiationMode.LAZY;\n\n  onInstanceCreated: onInstanceCreatedCallback<T> | null = null;\n\n  /**\n   *\n   * @param name The public service name, e.g. app, auth, firestore, database\n   * @param instanceFactory Service factory responsible for creating the public interface\n   * @param type whether the service provided by the component is public or private\n   */\n  constructor(\n    readonly name: T,\n    readonly instanceFactory: InstanceFactory<T>,\n    readonly type: ComponentType\n  ) {}\n\n  setInstantiationMode(mode: InstantiationMode): this {\n    this.instantiationMode = mode;\n    return this;\n  }\n\n  setMultipleInstances(multipleInstances: boolean): this {\n    this.multipleInstances = multipleInstances;\n    return this;\n  }\n\n  setServiceProps(props: Dictionary): this {\n    this.serviceProps = props;\n    return this;\n  }\n\n  setInstanceCreatedCallback(callback: onInstanceCreatedCallback<T>): this {\n    this.onInstanceCreated = callback;\n    return this;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Deferred } from '@firebase/util';\nimport { ComponentContainer } from './component_container';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport {\n  InitializeOptions,\n  InstantiationMode,\n  Name,\n  NameServiceMapping,\n  OnInitCallBack\n} from './types';\nimport { Component } from './component';\n\n/**\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\n * NameServiceMapping[T] is an alias for the type of the instance\n */\nexport class Provider<T extends Name> {\n  private component: Component<T> | null = null;\n  private readonly instances: Map<string, NameServiceMapping[T]> = new Map();\n  private readonly instancesDeferred: Map<\n    string,\n    Deferred<NameServiceMapping[T]>\n  > = new Map();\n  private readonly instancesOptions: Map<string, Record<string, unknown>> =\n    new Map();\n  private onInitCallbacks: Map<string, Set<OnInitCallBack<T>>> = new Map();\n\n  constructor(\n    private readonly name: T,\n    private readonly container: ComponentContainer\n  ) {}\n\n  /**\n   * @param identifier A provider can provide mulitple instances of a service\n   * if this.component.multipleInstances is true.\n   */\n  get(identifier?: string): Promise<NameServiceMapping[T]> {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n\n    if (!this.instancesDeferred.has(normalizedIdentifier)) {\n      const deferred = new Deferred<NameServiceMapping[T]>();\n      this.instancesDeferred.set(normalizedIdentifier, deferred);\n\n      if (\n        this.isInitialized(normalizedIdentifier) ||\n        this.shouldAutoInitialize()\n      ) {\n        // initialize the service if it can be auto-initialized\n        try {\n          const instance = this.getOrInitializeService({\n            instanceIdentifier: normalizedIdentifier\n          });\n          if (instance) {\n            deferred.resolve(instance);\n          }\n        } catch (e) {\n          // when the instance factory throws an exception during get(), it should not cause\n          // a fatal error. We just return the unresolved promise in this case.\n        }\n      }\n    }\n\n    return this.instancesDeferred.get(normalizedIdentifier)!.promise;\n  }\n\n  /**\n   *\n   * @param options.identifier A provider can provide mulitple instances of a service\n   * if this.component.multipleInstances is true.\n   * @param options.optional If optional is false or not provided, the method throws an error when\n   * the service is not immediately available.\n   * If optional is true, the method returns null if the service is not immediately available.\n   */\n  getImmediate(options: {\n    identifier?: string;\n    optional: true;\n  }): NameServiceMapping[T] | null;\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: false;\n  }): NameServiceMapping[T];\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: boolean;\n  }): NameServiceMapping[T] | null {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(\n      options?.identifier\n    );\n    const optional = options?.optional ?? false;\n\n    if (\n      this.isInitialized(normalizedIdentifier) ||\n      this.shouldAutoInitialize()\n    ) {\n      try {\n        return this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        });\n      } catch (e) {\n        if (optional) {\n          return null;\n        } else {\n          throw e;\n        }\n      }\n    } else {\n      // In case a component is not initialized and should/can not be auto-initialized at the moment, return null if the optional flag is set, or throw\n      if (optional) {\n        return null;\n      } else {\n        throw Error(`Service ${this.name} is not available`);\n      }\n    }\n  }\n\n  getComponent(): Component<T> | null {\n    return this.component;\n  }\n\n  setComponent(component: Component<T>): void {\n    if (component.name !== this.name) {\n      throw Error(\n        `Mismatching Component ${component.name} for Provider ${this.name}.`\n      );\n    }\n\n    if (this.component) {\n      throw Error(`Component for ${this.name} has already been provided`);\n    }\n\n    this.component = component;\n\n    // return early without attempting to initialize the component if the component requires explicit initialization (calling `Provider.initialize()`)\n    if (!this.shouldAutoInitialize()) {\n      return;\n    }\n\n    // if the service is eager, initialize the default instance\n    if (isComponentEager(component)) {\n      try {\n        this.getOrInitializeService({ instanceIdentifier: DEFAULT_ENTRY_NAME });\n      } catch (e) {\n        // when the instance factory for an eager Component throws an exception during the eager\n        // initialization, it should not cause a fatal error.\n        // TODO: Investigate if we need to make it configurable, because some component may want to cause\n        // a fatal error in this case?\n      }\n    }\n\n    // Create service instances for the pending promises and resolve them\n    // NOTE: if this.multipleInstances is false, only the default instance will be created\n    // and all promises with resolve with it regardless of the identifier.\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedIdentifier =\n        this.normalizeInstanceIdentifier(instanceIdentifier);\n\n      try {\n        // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\n        const instance = this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        })!;\n        instanceDeferred.resolve(instance);\n      } catch (e) {\n        // when the instance factory throws an exception, it should not cause\n        // a fatal error. We just leave the promise unresolved.\n      }\n    }\n  }\n\n  clearInstance(identifier: string = DEFAULT_ENTRY_NAME): void {\n    this.instancesDeferred.delete(identifier);\n    this.instancesOptions.delete(identifier);\n    this.instances.delete(identifier);\n  }\n\n  // app.delete() will call this method on every provider to delete the services\n  // TODO: should we mark the provider as deleted?\n  async delete(): Promise<void> {\n    const services = Array.from(this.instances.values());\n\n    await Promise.all([\n      ...services\n        .filter(service => 'INTERNAL' in service) // legacy services\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any).INTERNAL!.delete()),\n      ...services\n        .filter(service => '_delete' in service) // modularized services\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any)._delete())\n    ]);\n  }\n\n  isComponentSet(): boolean {\n    return this.component != null;\n  }\n\n  isInitialized(identifier: string = DEFAULT_ENTRY_NAME): boolean {\n    return this.instances.has(identifier);\n  }\n\n  getOptions(identifier: string = DEFAULT_ENTRY_NAME): Record<string, unknown> {\n    return this.instancesOptions.get(identifier) || {};\n  }\n\n  initialize(opts: InitializeOptions = {}): NameServiceMapping[T] {\n    const { options = {} } = opts;\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(\n      opts.instanceIdentifier\n    );\n    if (this.isInitialized(normalizedIdentifier)) {\n      throw Error(\n        `${this.name}(${normalizedIdentifier}) has already been initialized`\n      );\n    }\n\n    if (!this.isComponentSet()) {\n      throw Error(`Component ${this.name} has not been registered yet`);\n    }\n\n    const instance = this.getOrInitializeService({\n      instanceIdentifier: normalizedIdentifier,\n      options\n    })!;\n\n    // resolve any pending promise waiting for the service instance\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedDeferredIdentifier =\n        this.normalizeInstanceIdentifier(instanceIdentifier);\n      if (normalizedIdentifier === normalizedDeferredIdentifier) {\n        instanceDeferred.resolve(instance);\n      }\n    }\n\n    return instance;\n  }\n\n  /**\n   *\n   * @param callback - a function that will be invoked  after the provider has been initialized by calling provider.initialize().\n   * The function is invoked SYNCHRONOUSLY, so it should not execute any longrunning tasks in order to not block the program.\n   *\n   * @param identifier An optional instance identifier\n   * @returns a function to unregister the callback\n   */\n  onInit(callback: OnInitCallBack<T>, identifier?: string): () => void {\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n    const existingCallbacks =\n      this.onInitCallbacks.get(normalizedIdentifier) ??\n      new Set<OnInitCallBack<T>>();\n    existingCallbacks.add(callback);\n    this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);\n\n    const existingInstance = this.instances.get(normalizedIdentifier);\n    if (existingInstance) {\n      callback(existingInstance, normalizedIdentifier);\n    }\n\n    return () => {\n      existingCallbacks.delete(callback);\n    };\n  }\n\n  /**\n   * Invoke onInit callbacks synchronously\n   * @param instance the service instance`\n   */\n  private invokeOnInitCallbacks(\n    instance: NameServiceMapping[T],\n    identifier: string\n  ): void {\n    const callbacks = this.onInitCallbacks.get(identifier);\n    if (!callbacks) {\n      return;\n    }\n    for (const callback of callbacks) {\n      try {\n        callback(instance, identifier);\n      } catch {\n        // ignore errors in the onInit callback\n      }\n    }\n  }\n\n  private getOrInitializeService({\n    instanceIdentifier,\n    options = {}\n  }: {\n    instanceIdentifier: string;\n    options?: Record<string, unknown>;\n  }): NameServiceMapping[T] | null {\n    let instance = this.instances.get(instanceIdentifier);\n    if (!instance && this.component) {\n      instance = this.component.instanceFactory(this.container, {\n        instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),\n        options\n      });\n      this.instances.set(instanceIdentifier, instance);\n      this.instancesOptions.set(instanceIdentifier, options);\n\n      /**\n       * Invoke onInit listeners.\n       * Note this.component.onInstanceCreated is different, which is used by the component creator,\n       * while onInit listeners are registered by consumers of the provider.\n       */\n      this.invokeOnInitCallbacks(instance, instanceIdentifier);\n\n      /**\n       * Order is important\n       * onInstanceCreated() should be called after this.instances.set(instanceIdentifier, instance); which\n       * makes `isInitialized()` return true.\n       */\n      if (this.component.onInstanceCreated) {\n        try {\n          this.component.onInstanceCreated(\n            this.container,\n            instanceIdentifier,\n            instance\n          );\n        } catch {\n          // ignore errors in the onInstanceCreatedCallback\n        }\n      }\n    }\n\n    return instance || null;\n  }\n\n  private normalizeInstanceIdentifier(\n    identifier: string = DEFAULT_ENTRY_NAME\n  ): string {\n    if (this.component) {\n      return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\n    } else {\n      return identifier; // assume multiple instances are supported before the component is provided.\n    }\n  }\n\n  private shouldAutoInitialize(): boolean {\n    return (\n      !!this.component &&\n      this.component.instantiationMode !== InstantiationMode.EXPLICIT\n    );\n  }\n}\n\n// undefined should be passed to the service factory for the default instance\nfunction normalizeIdentifierForFactory(identifier: string): string | undefined {\n  return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\n}\n\nfunction isComponentEager<T extends Name>(component: Component<T>): boolean {\n  return component.instantiationMode === InstantiationMode.EAGER;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type LogLevelString =\n  | 'debug'\n  | 'verbose'\n  | 'info'\n  | 'warn'\n  | 'error'\n  | 'silent';\n\nexport interface LogOptions {\n  level: LogLevelString;\n}\n\nexport type LogCallback = (callbackParams: LogCallbackParams) => void;\n\nexport interface LogCallbackParams {\n  level: LogLevelString;\n  message: string;\n  args: unknown[];\n  type: string;\n}\n\n/**\n * A container for all of the Logger instances\n */\nexport const instances: Logger[] = [];\n\n/**\n * The JS SDK supports 5 log levels and also allows a user the ability to\n * silence the logs altogether.\n *\n * The order is a follows:\n * DEBUG < VERBOSE < INFO < WARN < ERROR\n *\n * All of the log types above the current log level will be captured (i.e. if\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\n * `VERBOSE` logs will not)\n */\nexport enum LogLevel {\n  DEBUG,\n  VERBOSE,\n  INFO,\n  WARN,\n  ERROR,\n  SILENT\n}\n\nconst levelStringToEnum: { [key in LogLevelString]: LogLevel } = {\n  'debug': LogLevel.DEBUG,\n  'verbose': LogLevel.VERBOSE,\n  'info': LogLevel.INFO,\n  'warn': LogLevel.WARN,\n  'error': LogLevel.ERROR,\n  'silent': LogLevel.SILENT\n};\n\n/**\n * The default log level\n */\nconst defaultLogLevel: LogLevel = LogLevel.INFO;\n\n/**\n * We allow users the ability to pass their own log handler. We will pass the\n * type of log, the current log level, and any other arguments passed (i.e. the\n * messages that the user wants to log) to this function.\n */\nexport type LogHandler = (\n  loggerInstance: Logger,\n  logType: LogLevel,\n  ...args: unknown[]\n) => void;\n\n/**\n * By default, `console.debug` is not displayed in the developer console (in\n * chrome). To avoid forcing users to have to opt-in to these logs twice\n * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\n * logs to the `console.log` function.\n */\nconst ConsoleMethod = {\n  [LogLevel.DEBUG]: 'log',\n  [LogLevel.VERBOSE]: 'log',\n  [LogLevel.INFO]: 'info',\n  [LogLevel.WARN]: 'warn',\n  [LogLevel.ERROR]: 'error'\n};\n\n/**\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\n * messages on to their corresponding console counterparts (if the log method\n * is supported by the current log level)\n */\nconst defaultLogHandler: LogHandler = (instance, logType, ...args): void => {\n  if (logType < instance.logLevel) {\n    return;\n  }\n  const now = new Date().toISOString();\n  const method = ConsoleMethod[logType as keyof typeof ConsoleMethod];\n  if (method) {\n    console[method as 'log' | 'info' | 'warn' | 'error'](\n      `[${now}]  ${instance.name}:`,\n      ...args\n    );\n  } else {\n    throw new Error(\n      `Attempted to log a message with an invalid logType (value: ${logType})`\n    );\n  }\n};\n\nexport class Logger {\n  /**\n   * Gives you an instance of a Logger to capture messages according to\n   * Firebase's logging scheme.\n   *\n   * @param name The name that the logs will be associated with\n   */\n  constructor(public name: string) {\n    /**\n     * Capture the current instance for later use\n     */\n    instances.push(this);\n  }\n\n  /**\n   * The log level of the given Logger instance.\n   */\n  private _logLevel = defaultLogLevel;\n\n  get logLevel(): LogLevel {\n    return this._logLevel;\n  }\n\n  set logLevel(val: LogLevel) {\n    if (!(val in LogLevel)) {\n      throw new TypeError(`Invalid value \"${val}\" assigned to \\`logLevel\\``);\n    }\n    this._logLevel = val;\n  }\n\n  // Workaround for setter/getter having to be the same type.\n  setLogLevel(val: LogLevel | LogLevelString): void {\n    this._logLevel = typeof val === 'string' ? levelStringToEnum[val] : val;\n  }\n\n  /**\n   * The main (internal) log handler for the Logger instance.\n   * Can be set to a new function in internal package code but not by user.\n   */\n  private _logHandler: LogHandler = defaultLogHandler;\n  get logHandler(): LogHandler {\n    return this._logHandler;\n  }\n  set logHandler(val: LogHandler) {\n    if (typeof val !== 'function') {\n      throw new TypeError('Value assigned to `logHandler` must be a function');\n    }\n    this._logHandler = val;\n  }\n\n  /**\n   * The optional, additional, user-defined log handler for the Logger instance.\n   */\n  private _userLogHandler: LogHandler | null = null;\n  get userLogHandler(): LogHandler | null {\n    return this._userLogHandler;\n  }\n  set userLogHandler(val: LogHandler | null) {\n    this._userLogHandler = val;\n  }\n\n  /**\n   * The functions below are all based on the `console` interface\n   */\n\n  debug(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.DEBUG, ...args);\n    this._logHandler(this, LogLevel.DEBUG, ...args);\n  }\n  log(...args: unknown[]): void {\n    this._userLogHandler &&\n      this._userLogHandler(this, LogLevel.VERBOSE, ...args);\n    this._logHandler(this, LogLevel.VERBOSE, ...args);\n  }\n  info(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.INFO, ...args);\n    this._logHandler(this, LogLevel.INFO, ...args);\n  }\n  warn(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.WARN, ...args);\n    this._logHandler(this, LogLevel.WARN, ...args);\n  }\n  error(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.ERROR, ...args);\n    this._logHandler(this, LogLevel.ERROR, ...args);\n  }\n}\n\nexport function setLogLevel(level: LogLevelString | LogLevel): void {\n  instances.forEach(inst => {\n    inst.setLogLevel(level);\n  });\n}\n\nexport function setUserLogHandler(\n  logCallback: LogCallback | null,\n  options?: LogOptions\n): void {\n  for (const instance of instances) {\n    let customLogLevel: LogLevel | null = null;\n    if (options && options.level) {\n      customLogLevel = levelStringToEnum[options.level];\n    }\n    if (logCallback === null) {\n      instance.userLogHandler = null;\n    } else {\n      instance.userLogHandler = (\n        instance: Logger,\n        level: LogLevel,\n        ...args: unknown[]\n      ) => {\n        const message = args\n          .map(arg => {\n            if (arg == null) {\n              return null;\n            } else if (typeof arg === 'string') {\n              return arg;\n            } else if (typeof arg === 'number' || typeof arg === 'boolean') {\n              return arg.toString();\n            } else if (arg instanceof Error) {\n              return arg.message;\n            } else {\n              try {\n                return JSON.stringify(arg);\n              } catch (ignored) {\n                return null;\n              }\n            }\n          })\n          .filter(arg => arg)\n          .join(' ');\n        if (level >= (customLogLevel ?? instance.logLevel)) {\n          logCallback({\n            level: LogLevel[level].toLowerCase() as LogLevelString,\n            message,\n            args,\n            type: instance.name\n          });\n        }\n      };\n    }\n  }\n}\n","/**\n * Firebase App\n *\n * @remarks This package coordinates the communication between the different Firebase components\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { registerCoreComponents } from './registerCoreComponents';\n\nexport * from './api';\nexport * from './internal';\nexport * from './public-types';\n\nregisterCoreComponents('__RUNTIME_ENV__');\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ComponentContainer,\n  ComponentType,\n  Provider,\n  Name\n} from '@firebase/component';\nimport { PlatformLoggerService, VersionService } from './types';\n\nexport class PlatformLoggerServiceImpl implements PlatformLoggerService {\n  constructor(private readonly container: ComponentContainer) {}\n  // In initial implementation, this will be called by installations on\n  // auth token refresh, and installations will send this string.\n  getPlatformInfoString(): string {\n    const providers = this.container.getProviders();\n    // Loop through providers and get library/version pairs from any that are\n    // version components.\n    return providers\n      .map(provider => {\n        if (isVersionServiceProvider(provider)) {\n          const service = provider.getImmediate() as VersionService;\n          return `${service.library}/${service.version}`;\n        } else {\n          return null;\n        }\n      })\n      .filter(logString => logString)\n      .join(' ');\n  }\n}\n/**\n *\n * @param provider check if this provider provides a VersionService\n *\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\n * provides VersionService. The provider is not necessarily a 'app-version'\n * provider.\n */\nfunction isVersionServiceProvider(provider: Provider<Name>): boolean {\n  const component = provider.getComponent();\n  return component?.type === ComponentType.VERSION;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp } from './public-types';\nimport { Component, Provider, Name } from '@firebase/component';\nimport { logger } from './logger';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport { FirebaseAppImpl } from './firebaseApp';\n\n/**\n * @internal\n */\nexport const _apps = new Map<string, FirebaseApp>();\n\n/**\n * Registered components.\n *\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const _components = new Map<string, Component<any>>();\n\n/**\n * @param component - the component being added to this app's container\n *\n * @internal\n */\nexport function _addComponent<T extends Name>(\n  app: FirebaseApp,\n  component: Component<T>\n): void {\n  try {\n    (app as FirebaseAppImpl).container.addComponent(component);\n  } catch (e) {\n    logger.debug(\n      `Component ${component.name} failed to register with FirebaseApp ${app.name}`,\n      e\n    );\n  }\n}\n\n/**\n *\n * @internal\n */\nexport function _addOrOverwriteComponent(\n  app: FirebaseApp,\n  component: Component\n): void {\n  (app as FirebaseAppImpl).container.addOrOverwriteComponent(component);\n}\n\n/**\n *\n * @param component - the component to register\n * @returns whether or not the component is registered successfully\n *\n * @internal\n */\nexport function _registerComponent<T extends Name>(\n  component: Component<T>\n): boolean {\n  const componentName = component.name;\n  if (_components.has(componentName)) {\n    logger.debug(\n      `There were multiple attempts to register component ${componentName}.`\n    );\n\n    return false;\n  }\n\n  _components.set(componentName, component);\n\n  // add the component to existing app instances\n  for (const app of _apps.values()) {\n    _addComponent(app as FirebaseAppImpl, component);\n  }\n\n  return true;\n}\n\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n *\n * @returns the provider for the service with the matching name\n *\n * @internal\n */\nexport function _getProvider<T extends Name>(\n  app: FirebaseApp,\n  name: T\n): Provider<T> {\n  const heartbeatController = (app as FirebaseAppImpl).container\n    .getProvider('heartbeat')\n    .getImmediate({ optional: true });\n  if (heartbeatController) {\n    void heartbeatController.triggerHeartbeat();\n  }\n  return (app as FirebaseAppImpl).container.getProvider(name);\n}\n\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n * @param instanceIdentifier - service instance identifier in case the service supports multiple instances\n *\n * @internal\n */\nexport function _removeServiceInstance<T extends Name>(\n  app: FirebaseApp,\n  name: T,\n  instanceIdentifier: string = DEFAULT_ENTRY_NAME\n): void {\n  _getProvider(app, name).clearInstance(instanceIdentifier);\n}\n\n/**\n * Test only\n *\n * @internal\n */\nexport function _clearComponents(): void {\n  _components.clear();\n}\n\n/**\n * Exported in order to be used in app-compat package\n */\nexport { DEFAULT_ENTRY_NAME as _DEFAULT_ENTRY_NAME };\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, ErrorMap } from '@firebase/util';\n\nexport const enum AppError {\n  NO_APP = 'no-app',\n  BAD_APP_NAME = 'bad-app-name',\n  DUPLICATE_APP = 'duplicate-app',\n  APP_DELETED = 'app-deleted',\n  INVALID_APP_ARGUMENT = 'invalid-app-argument',\n  INVALID_LOG_ARGUMENT = 'invalid-log-argument',\n  STORAGE_OPEN = 'storage-open',\n  STORAGE_GET = 'storage-get',\n  STORAGE_WRITE = 'storage-set',\n  STORAGE_DELETE = 'storage-delete'\n}\n\nconst ERRORS: ErrorMap<AppError> = {\n  [AppError.NO_APP]:\n    \"No Firebase App '{$appName}' has been created - \" +\n    'call Firebase App.initializeApp()',\n  [AppError.BAD_APP_NAME]: \"Illegal App name: '{$appName}\",\n  [AppError.DUPLICATE_APP]:\n    \"Firebase App named '{$appName}' already exists with different options or config\",\n  [AppError.APP_DELETED]: \"Firebase App named '{$appName}' already deleted\",\n  [AppError.INVALID_APP_ARGUMENT]:\n    'firebase.{$appName}() takes either no argument or a ' +\n    'Firebase App instance.',\n  [AppError.INVALID_LOG_ARGUMENT]:\n    'First argument to `onLog` must be null or a function.',\n  [AppError.STORAGE_OPEN]:\n    'Error thrown when opening storage. Original error: {$originalErrorMessage}.',\n  [AppError.STORAGE_GET]:\n    'Error thrown when reading from storage. Original error: {$originalErrorMessage}.',\n  [AppError.STORAGE_WRITE]:\n    'Error thrown when writing to storage. Original error: {$originalErrorMessage}.',\n  [AppError.STORAGE_DELETE]:\n    'Error thrown when deleting from storage. Original error: {$originalErrorMessage}.'\n};\n\ninterface ErrorParams {\n  [AppError.NO_APP]: { appName: string };\n  [AppError.BAD_APP_NAME]: { appName: string };\n  [AppError.DUPLICATE_APP]: { appName: string };\n  [AppError.APP_DELETED]: { appName: string };\n  [AppError.INVALID_APP_ARGUMENT]: { appName: string };\n  [AppError.STORAGE_OPEN]: { originalErrorMessage?: string };\n  [AppError.STORAGE_GET]: { originalErrorMessage?: string };\n  [AppError.STORAGE_WRITE]: { originalErrorMessage?: string };\n  [AppError.STORAGE_DELETE]: { originalErrorMessage?: string };\n}\n\nexport const ERROR_FACTORY = new ErrorFactory<AppError, ErrorParams>(\n  'app',\n  'Firebase',\n  ERRORS\n);\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppSettings\n} from './public-types';\nimport {\n  ComponentContainer,\n  Component,\n  ComponentType\n} from '@firebase/component';\nimport { ERROR_FACTORY, AppError } from './errors';\n\nexport class FirebaseAppImpl implements FirebaseApp {\n  private readonly _options: FirebaseOptions;\n  private readonly _name: string;\n  /**\n   * Original config values passed in as a constructor parameter.\n   * It is only used to compare with another config object to support idempotent initializeApp().\n   *\n   * Updating automaticDataCollectionEnabled on the App instance will not change its value in _config.\n   */\n  private readonly _config: Required<FirebaseAppSettings>;\n  private _automaticDataCollectionEnabled: boolean;\n  private _isDeleted = false;\n  private readonly _container: ComponentContainer;\n\n  constructor(\n    options: FirebaseOptions,\n    config: Required<FirebaseAppSettings>,\n    container: ComponentContainer\n  ) {\n    this._options = { ...options };\n    this._config = { ...config };\n    this._name = config.name;\n    this._automaticDataCollectionEnabled =\n      config.automaticDataCollectionEnabled;\n    this._container = container;\n    this.container.addComponent(\n      new Component('app', () => this, ComponentType.PUBLIC)\n    );\n  }\n\n  get automaticDataCollectionEnabled(): boolean {\n    this.checkDestroyed();\n    return this._automaticDataCollectionEnabled;\n  }\n\n  set automaticDataCollectionEnabled(val: boolean) {\n    this.checkDestroyed();\n    this._automaticDataCollectionEnabled = val;\n  }\n\n  get name(): string {\n    this.checkDestroyed();\n    return this._name;\n  }\n\n  get options(): FirebaseOptions {\n    this.checkDestroyed();\n    return this._options;\n  }\n\n  get config(): Required<FirebaseAppSettings> {\n    this.checkDestroyed();\n    return this._config;\n  }\n\n  get container(): ComponentContainer {\n    return this._container;\n  }\n\n  get isDeleted(): boolean {\n    return this._isDeleted;\n  }\n\n  set isDeleted(val: boolean) {\n    this._isDeleted = val;\n  }\n\n  /**\n   * This function will throw an Error if the App has already been deleted -\n   * use before performing API actions on the App.\n   */\n  private checkDestroyed(): void {\n    if (this.isDeleted) {\n      throw ERROR_FACTORY.create(AppError.APP_DELETED, { appName: this._name });\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppSettings\n} from './public-types';\nimport { DEFAULT_ENTRY_NAME, PLATFORM_LOG_STRING } from './constants';\nimport { ERROR_FACTORY, AppError } from './errors';\nimport {\n  ComponentContainer,\n  Component,\n  Name,\n  ComponentType\n} from '@firebase/component';\nimport { version } from '../../firebase/package.json';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { _apps, _components, _registerComponent } from './internal';\nimport { logger } from './logger';\nimport {\n  LogLevelString,\n  setLogLevel as setLogLevelImpl,\n  LogCallback,\n  LogOptions,\n  setUserLogHandler\n} from '@firebase/logger';\nimport { deepEqual } from '@firebase/util';\n\nexport { FirebaseError } from '@firebase/util';\n\n/**\n * The current SDK version.\n *\n * @public\n */\nexport const SDK_VERSION = version;\n\n/**\n * Creates and initializes a {@link @firebase/app#FirebaseApp} instance.\n *\n * See\n * {@link\n *   https://firebase.google.com/docs/web/setup#add_firebase_to_your_app\n *   | Add Firebase to your app} and\n * {@link\n *   https://firebase.google.com/docs/web/setup#multiple-projects\n *   | Initialize multiple projects} for detailed documentation.\n *\n * @example\n * ```javascript\n *\n * // Initialize default app\n * // Retrieve your own options values by adding a web app on\n * // https://console.firebase.google.com\n * initializeApp({\n *   apiKey: \"AIza....\",                             // Auth / General Use\n *   authDomain: \"YOUR_APP.firebaseapp.com\",         // Auth with popup/redirect\n *   databaseURL: \"https://YOUR_APP.firebaseio.com\", // Realtime Database\n *   storageBucket: \"YOUR_APP.appspot.com\",          // Storage\n *   messagingSenderId: \"123456789\"                  // Cloud Messaging\n * });\n * ```\n *\n * @example\n * ```javascript\n *\n * // Initialize another app\n * const otherApp = initializeApp({\n *   databaseURL: \"https://<OTHER_DATABASE_NAME>.firebaseio.com\",\n *   storageBucket: \"<OTHER_STORAGE_BUCKET>.appspot.com\"\n * }, \"otherApp\");\n * ```\n *\n * @param options - Options to configure the app's services.\n * @param name - Optional name of the app to initialize. If no name\n *   is provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The initialized app.\n *\n * @public\n */\nexport function initializeApp(\n  options: FirebaseOptions,\n  name?: string\n): FirebaseApp;\n/**\n * Creates and initializes a FirebaseApp instance.\n *\n * @param options - Options to configure the app's services.\n * @param config - FirebaseApp Configuration\n *\n * @public\n */\nexport function initializeApp(\n  options: FirebaseOptions,\n  config?: FirebaseAppSettings\n): FirebaseApp;\nexport function initializeApp(\n  options: FirebaseOptions,\n  rawConfig = {}\n): FirebaseApp {\n  if (typeof rawConfig !== 'object') {\n    const name = rawConfig;\n    rawConfig = { name };\n  }\n\n  const config: Required<FirebaseAppSettings> = {\n    name: DEFAULT_ENTRY_NAME,\n    automaticDataCollectionEnabled: false,\n    ...rawConfig\n  };\n  const name = config.name;\n\n  if (typeof name !== 'string' || !name) {\n    throw ERROR_FACTORY.create(AppError.BAD_APP_NAME, {\n      appName: String(name)\n    });\n  }\n\n  const existingApp = _apps.get(name) as FirebaseAppImpl;\n  if (existingApp) {\n    // return the existing app if options and config deep equal the ones in the existing app.\n    if (\n      deepEqual(options, existingApp.options) &&\n      deepEqual(config, existingApp.config)\n    ) {\n      return existingApp;\n    } else {\n      throw ERROR_FACTORY.create(AppError.DUPLICATE_APP, { appName: name });\n    }\n  }\n\n  const container = new ComponentContainer(name);\n  for (const component of _components.values()) {\n    container.addComponent(component);\n  }\n\n  const newApp = new FirebaseAppImpl(options, config, container);\n\n  _apps.set(name, newApp);\n\n  return newApp;\n}\n\n/**\n * Retrieves a {@link @firebase/app#FirebaseApp} instance.\n *\n * When called with no arguments, the default app is returned. When an app name\n * is provided, the app corresponding to that name is returned.\n *\n * An exception is thrown if the app being retrieved has not yet been\n * initialized.\n *\n * @example\n * ```javascript\n * // Return the default app\n * const app = getApp();\n * ```\n *\n * @example\n * ```javascript\n * // Return a named app\n * const otherApp = getApp(\"otherApp\");\n * ```\n *\n * @param name - Optional name of the app to return. If no name is\n *   provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The app corresponding to the provided app name.\n *   If no app name is provided, the default app is returned.\n *\n * @public\n */\nexport function getApp(name: string = DEFAULT_ENTRY_NAME): FirebaseApp {\n  const app = _apps.get(name);\n  if (!app) {\n    throw ERROR_FACTORY.create(AppError.NO_APP, { appName: name });\n  }\n\n  return app;\n}\n\n/**\n * A (read-only) array of all initialized apps.\n * @public\n */\nexport function getApps(): FirebaseApp[] {\n  return Array.from(_apps.values());\n}\n\n/**\n * Renders this app unusable and frees the resources of all associated\n * services.\n *\n * @example\n * ```javascript\n * deleteApp(app)\n *   .then(function() {\n *     console.log(\"App deleted successfully\");\n *   })\n *   .catch(function(error) {\n *     console.log(\"Error deleting app:\", error);\n *   });\n * ```\n *\n * @public\n */\nexport async function deleteApp(app: FirebaseApp): Promise<void> {\n  const name = app.name;\n  if (_apps.has(name)) {\n    _apps.delete(name);\n    await Promise.all(\n      (app as FirebaseAppImpl).container\n        .getProviders()\n        .map(provider => provider.delete())\n    );\n    (app as FirebaseAppImpl).isDeleted = true;\n  }\n}\n\n/**\n * Registers a library's name and version for platform logging purposes.\n * @param library - Name of 1p or 3p library (e.g. firestore, angularfire)\n * @param version - Current version of that library.\n * @param variant - Bundle variant, e.g., node, rn, etc.\n *\n * @public\n */\nexport function registerVersion(\n  libraryKeyOrName: string,\n  version: string,\n  variant?: string\n): void {\n  // TODO: We can use this check to whitelist strings when/if we set up\n  // a good whitelist system.\n  let library = PLATFORM_LOG_STRING[libraryKeyOrName] ?? libraryKeyOrName;\n  if (variant) {\n    library += `-${variant}`;\n  }\n  const libraryMismatch = library.match(/\\s|\\//);\n  const versionMismatch = version.match(/\\s|\\//);\n  if (libraryMismatch || versionMismatch) {\n    const warning = [\n      `Unable to register library \"${library}\" with version \"${version}\":`\n    ];\n    if (libraryMismatch) {\n      warning.push(\n        `library name \"${library}\" contains illegal characters (whitespace or \"/\")`\n      );\n    }\n    if (libraryMismatch && versionMismatch) {\n      warning.push('and');\n    }\n    if (versionMismatch) {\n      warning.push(\n        `version name \"${version}\" contains illegal characters (whitespace or \"/\")`\n      );\n    }\n    logger.warn(warning.join(' '));\n    return;\n  }\n  _registerComponent(\n    new Component(\n      `${library}-version` as Name,\n      () => ({ library, version }),\n      ComponentType.VERSION\n    )\n  );\n}\n\n/**\n * Sets log handler for all Firebase SDKs.\n * @param logCallback - An optional custom log handler that executes user code whenever\n * the Firebase SDK makes a logging call.\n *\n * @public\n */\nexport function onLog(\n  logCallback: LogCallback | null,\n  options?: LogOptions\n): void {\n  if (logCallback !== null && typeof logCallback !== 'function') {\n    throw ERROR_FACTORY.create(AppError.INVALID_LOG_ARGUMENT);\n  }\n  setUserLogHandler(logCallback, options);\n}\n\n/**\n * Sets log level for all Firebase SDKs.\n *\n * All of the log types above the current log level are captured (i.e. if\n * you set the log level to `info`, errors are logged, but `debug` and\n * `verbose` logs are not).\n *\n * @public\n */\nexport function setLogLevel(logLevel: LogLevelString): void {\n  setLogLevelImpl(logLevel);\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DBWrapper, openDB } from '@firebase/util';\nimport { AppError, ERROR_FACTORY } from './errors';\nimport { FirebaseApp } from './public-types';\nimport { HeartbeatsInIndexedDB } from './types';\nconst DB_NAME = 'firebase-heartbeat-database';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'firebase-heartbeat-store';\n\nlet dbPromise: Promise<DBWrapper> | null = null;\nfunction getDbPromise(): Promise<DBWrapper> {\n  if (!dbPromise) {\n    dbPromise = openDB(DB_NAME, DB_VERSION, (db, oldVersion) => {\n      // We don't use 'break' in this switch statement, the fall-through\n      // behavior is what we want, because if there are multiple versions between\n      // the old version and the current version, we want ALL the migrations\n      // that correspond to those versions to run, not only the last one.\n      // eslint-disable-next-line default-case\n      switch (oldVersion) {\n        case 0:\n          db.createObjectStore(STORE_NAME);\n      }\n    }).catch(e => {\n      throw ERROR_FACTORY.create(AppError.STORAGE_OPEN, {\n        originalErrorMessage: e.message\n      });\n    });\n  }\n  return dbPromise;\n}\n\nexport async function readHeartbeatsFromIndexedDB(\n  app: FirebaseApp\n): Promise<HeartbeatsInIndexedDB | undefined> {\n  try {\n    const db = await getDbPromise();\n    return db\n      .transaction(STORE_NAME)\n      .objectStore(STORE_NAME)\n      .get(computeKey(app)) as Promise<HeartbeatsInIndexedDB | undefined>;\n  } catch (e) {\n    throw ERROR_FACTORY.create(AppError.STORAGE_GET, {\n      originalErrorMessage: e.message\n    });\n  }\n}\n\nexport async function writeHeartbeatsToIndexedDB(\n  app: FirebaseApp,\n  heartbeatObject: HeartbeatsInIndexedDB\n): Promise<void> {\n  try {\n    const db = await getDbPromise();\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const objectStore = tx.objectStore(STORE_NAME);\n    await objectStore.put(heartbeatObject, computeKey(app));\n    return tx.complete;\n  } catch (e) {\n    throw ERROR_FACTORY.create(AppError.STORAGE_WRITE, {\n      originalErrorMessage: e.message\n    });\n  }\n}\n\nfunction computeKey(app: FirebaseApp): string {\n  return `${app.name}!${app.options.appId}`;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ComponentContainer } from '@firebase/component';\nimport {\n  base64urlEncodeWithoutPadding,\n  isIndexedDBAvailable,\n  validateIndexedDBOpenable\n} from '@firebase/util';\nimport {\n  readHeartbeatsFromIndexedDB,\n  writeHeartbeatsToIndexedDB\n} from './indexeddb';\nimport { FirebaseApp } from './public-types';\nimport {\n  HeartbeatsByUserAgent,\n  HeartbeatService,\n  HeartbeatsInIndexedDB,\n  HeartbeatStorage,\n  SingleDateHeartbeat\n} from './types';\n\nconst MAX_HEADER_BYTES = 1024;\n// 30 days\nconst STORED_HEARTBEAT_RETENTION_MAX_MILLIS = 30 * 24 * 60 * 60 * 1000;\n\nexport class HeartbeatServiceImpl implements HeartbeatService {\n  /**\n   * The persistence layer for heartbeats\n   * Leave public for easier testing.\n   */\n  _storage: HeartbeatStorageImpl;\n\n  /**\n   * In-memory cache for heartbeats, used by getHeartbeatsHeader() to generate\n   * the header string.\n   * Stores one record per date. This will be consolidated into the standard\n   * format of one record per user agent string before being sent as a header.\n   * Populated from indexedDB when the controller is instantiated and should\n   * be kept in sync with indexedDB.\n   * Leave public for easier testing.\n   */\n  _heartbeatsCache: HeartbeatsInIndexedDB | null = null;\n\n  /**\n   * the initialization promise for populating heartbeatCache.\n   * If getHeartbeatsHeader() is called before the promise resolves\n   * (hearbeatsCache == null), it should wait for this promise\n   * Leave public for easier testing.\n   */\n  _heartbeatsCachePromise: Promise<HeartbeatsInIndexedDB>;\n  constructor(private readonly container: ComponentContainer) {\n    const app = this.container.getProvider('app').getImmediate();\n    this._storage = new HeartbeatStorageImpl(app);\n    this._heartbeatsCachePromise = this._storage.read().then(result => {\n      this._heartbeatsCache = result;\n      return result;\n    });\n  }\n\n  /**\n   * Called to report a heartbeat. The function will generate\n   * a HeartbeatsByUserAgent object, update heartbeatsCache, and persist it\n   * to IndexedDB.\n   * Note that we only store one heartbeat per day. So if a heartbeat for today is\n   * already logged, subsequent calls to this function in the same day will be ignored.\n   */\n  async triggerHeartbeat(): Promise<void> {\n    const platformLogger = this.container\n      .getProvider('platform-logger')\n      .getImmediate();\n\n    // This is the \"Firebase user agent\" string from the platform logger\n    // service, not the browser user agent.\n    const agent = platformLogger.getPlatformInfoString();\n    const date = getUTCDateString();\n    if (this._heartbeatsCache === null) {\n      this._heartbeatsCache = await this._heartbeatsCachePromise;\n    }\n    // Do not store a heartbeat if one is already stored for this day\n    // or if a header has already been sent today.\n    if (\n      this._heartbeatsCache.lastSentHeartbeatDate === date ||\n      this._heartbeatsCache.heartbeats.some(\n        singleDateHeartbeat => singleDateHeartbeat.date === date\n      )\n    ) {\n      return;\n    } else {\n      // There is no entry for this date. Create one.\n      this._heartbeatsCache.heartbeats.push({ date, agent });\n    }\n    // Remove entries older than 30 days.\n    this._heartbeatsCache.heartbeats = this._heartbeatsCache.heartbeats.filter(\n      singleDateHeartbeat => {\n        const hbTimestamp = new Date(singleDateHeartbeat.date).valueOf();\n        const now = Date.now();\n        return now - hbTimestamp <= STORED_HEARTBEAT_RETENTION_MAX_MILLIS;\n      }\n    );\n    return this._storage.overwrite(this._heartbeatsCache);\n  }\n\n  /**\n   * Returns a base64 encoded string which can be attached to the heartbeat-specific header directly.\n   * It also clears all heartbeats from memory as well as in IndexedDB.\n   *\n   * NOTE: Consuming product SDKs should not send the header if this method\n   * returns an empty string.\n   */\n  async getHeartbeatsHeader(): Promise<string> {\n    if (this._heartbeatsCache === null) {\n      await this._heartbeatsCachePromise;\n    }\n    // If it's still null or the array is empty, there is no data to send.\n    if (\n      this._heartbeatsCache === null ||\n      this._heartbeatsCache.heartbeats.length === 0\n    ) {\n      return '';\n    }\n    const date = getUTCDateString();\n    // Extract as many heartbeats from the cache as will fit under the size limit.\n    const { heartbeatsToSend, unsentEntries } = extractHeartbeatsForHeader(\n      this._heartbeatsCache.heartbeats\n    );\n    const headerString = base64urlEncodeWithoutPadding(\n      JSON.stringify({ version: 2, heartbeats: heartbeatsToSend })\n    );\n    // Store last sent date to prevent another being logged/sent for the same day.\n    this._heartbeatsCache.lastSentHeartbeatDate = date;\n    if (unsentEntries.length > 0) {\n      // Store any unsent entries if they exist.\n      this._heartbeatsCache.heartbeats = unsentEntries;\n      // This seems more likely than emptying the array (below) to lead to some odd state\n      // since the cache isn't empty and this will be called again on the next request,\n      // and is probably safest if we await it.\n      await this._storage.overwrite(this._heartbeatsCache);\n    } else {\n      this._heartbeatsCache.heartbeats = [];\n      // Do not wait for this, to reduce latency.\n      void this._storage.overwrite(this._heartbeatsCache);\n    }\n    return headerString;\n  }\n}\n\nfunction getUTCDateString(): string {\n  const today = new Date();\n  // Returns date format 'YYYY-MM-DD'\n  return today.toISOString().substring(0, 10);\n}\n\nexport function extractHeartbeatsForHeader(\n  heartbeatsCache: SingleDateHeartbeat[],\n  maxSize = MAX_HEADER_BYTES\n): {\n  heartbeatsToSend: HeartbeatsByUserAgent[];\n  unsentEntries: SingleDateHeartbeat[];\n} {\n  // Heartbeats grouped by user agent in the standard format to be sent in\n  // the header.\n  const heartbeatsToSend: HeartbeatsByUserAgent[] = [];\n  // Single date format heartbeats that are not sent.\n  let unsentEntries = heartbeatsCache.slice();\n  for (const singleDateHeartbeat of heartbeatsCache) {\n    // Look for an existing entry with the same user agent.\n    const heartbeatEntry = heartbeatsToSend.find(\n      hb => hb.agent === singleDateHeartbeat.agent\n    );\n    if (!heartbeatEntry) {\n      // If no entry for this user agent exists, create one.\n      heartbeatsToSend.push({\n        agent: singleDateHeartbeat.agent,\n        dates: [singleDateHeartbeat.date]\n      });\n      if (countBytes(heartbeatsToSend) > maxSize) {\n        // If the header would exceed max size, remove the added heartbeat\n        // entry and stop adding to the header.\n        heartbeatsToSend.pop();\n        break;\n      }\n    } else {\n      heartbeatEntry.dates.push(singleDateHeartbeat.date);\n      // If the header would exceed max size, remove the added date\n      // and stop adding to the header.\n      if (countBytes(heartbeatsToSend) > maxSize) {\n        heartbeatEntry.dates.pop();\n        break;\n      }\n    }\n    // Pop unsent entry from queue. (Skipped if adding the entry exceeded\n    // quota and the loop breaks early.)\n    unsentEntries = unsentEntries.slice(1);\n  }\n  return {\n    heartbeatsToSend,\n    unsentEntries\n  };\n}\n\nexport class HeartbeatStorageImpl implements HeartbeatStorage {\n  private _canUseIndexedDBPromise: Promise<boolean>;\n  constructor(public app: FirebaseApp) {\n    this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();\n  }\n  async runIndexedDBEnvironmentCheck(): Promise<boolean> {\n    if (!isIndexedDBAvailable()) {\n      return false;\n    } else {\n      return validateIndexedDBOpenable()\n        .then(() => true)\n        .catch(() => false);\n    }\n  }\n  /**\n   * Read all heartbeats.\n   */\n  async read(): Promise<HeartbeatsInIndexedDB> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return { heartbeats: [] };\n    } else {\n      const idbHeartbeatObject = await readHeartbeatsFromIndexedDB(this.app);\n      return idbHeartbeatObject || { heartbeats: [] };\n    }\n  }\n  // overwrite the storage with the provided heartbeats\n  async overwrite(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return;\n    } else {\n      const existingHeartbeatsObject = await this.read();\n      return writeHeartbeatsToIndexedDB(this.app, {\n        lastSentHeartbeatDate:\n          heartbeatsObject.lastSentHeartbeatDate ??\n          existingHeartbeatsObject.lastSentHeartbeatDate,\n        heartbeats: heartbeatsObject.heartbeats\n      });\n    }\n  }\n  // add heartbeats\n  async add(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return;\n    } else {\n      const existingHeartbeatsObject = await this.read();\n      return writeHeartbeatsToIndexedDB(this.app, {\n        lastSentHeartbeatDate:\n          heartbeatsObject.lastSentHeartbeatDate ??\n          existingHeartbeatsObject.lastSentHeartbeatDate,\n        heartbeats: [\n          ...existingHeartbeatsObject.heartbeats,\n          ...heartbeatsObject.heartbeats\n        ]\n      });\n    }\n  }\n}\n\n/**\n * Calculate bytes of a HeartbeatsByUserAgent array after being wrapped\n * in a platform logging header JSON object, stringified, and converted\n * to base 64.\n */\nexport function countBytes(heartbeatsCache: HeartbeatsByUserAgent[]): number {\n  // base64 has a restricted set of characters, all of which should be 1 byte.\n  return base64urlEncodeWithoutPadding(\n    // heartbeatsCache wrapper properties\n    JSON.stringify({ version: 2, heartbeats: heartbeatsCache })\n  ).length;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, ComponentType } from '@firebase/component';\nimport { PlatformLoggerServiceImpl } from './platformLoggerService';\nimport { name, version } from '../package.json';\nimport { _registerComponent } from './internal';\nimport { registerVersion } from './api';\nimport { HeartbeatServiceImpl } from './heartbeatService';\n\nexport function registerCoreComponents(variant?: string): void {\n  _registerComponent(\n    new Component(\n      'platform-logger',\n      container => new PlatformLoggerServiceImpl(container),\n      ComponentType.PRIVATE\n    )\n  );\n  _registerComponent(\n    new Component(\n      'heartbeat',\n      container => new HeartbeatServiceImpl(container),\n      ComponentType.PRIVATE\n    )\n  );\n\n  // Register `app` package.\n  registerVersion(name, version, variant);\n  // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n  registerVersion(name, version, '__BUILD_TARGET__');\n  // Register platform SDK identifier (no version).\n  registerVersion('fire-js', '');\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerVersion } from '@firebase/app';\nimport { name, version } from '../package.json';\n\nregisterVersion(name, version, 'app');\nexport * from '@firebase/app';\n","export default class Nave {\r\n  constructor(juego) {\r\n    this.juego = juego;\r\n    this.posicion = {\r\n      x: 0,\r\n      y: 0\r\n    };\r\n    this.limite = {\r\n      i: this.juego.wi,\r\n      d: this.juego.wd\r\n    };\r\n    this.tipo = 0;\r\n    this.w = 0;\r\n    this.h = 0;\r\n    this.velocidad = {\r\n      x: 0,\r\n      y: 0,\r\n      max: 10\r\n    };\r\n  }\r\n  dibujar() {\r\n    this.crearNave(\r\n      this.juego.ctx,\r\n      this.posicion.x,\r\n      this.posicion.y,\r\n      this.w,\r\n      this.h,\r\n      this.tipo\r\n    );\r\n  }\r\n  actualizar() {\r\n    this.cambiarDeTama√±o();\r\n    this.juego.invasores.forEach(invasor => {\r\n      if (this.posicion.y <= invasor.posicion.y + invasor.h)\r\n        this.juego.vidas = 0;\r\n    });\r\n    this.posicion.x += this.velocidad.x;\r\n    if (this.posicion.x <= this.limite.i) this.posicion.x = this.limite.i;\r\n\r\n    if (this.posicion.x + this.w >= this.limite.d)\r\n      this.posicion.x = this.limite.d - this.w;\r\n  }\r\n  crearNave(ctx, x, y, w, h, tipo) {\r\n    let navecita = {\r\n      0: [\r\n        [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 2, 2, 2, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 2, 2, 2, 2, 2, 0, 0, 0, 0],\r\n        [0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0],\r\n        [0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0],\r\n        [0, 0, 0, 2, 0, 0, 2, 0, 0, 2, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 3, 2, 3, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 3, 2, 3, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 3, 2, 3, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 3, 2, 3, 0, 0, 0, 0, 0],\r\n        [4, 4, 4, 0, 3, 3, 2, 3, 3, 0, 4, 4, 4],\r\n        [4, 3, 4, 3, 3, 3, 2, 3, 3, 3, 4, 3, 4],\r\n        [4, 3, 4, 3, 3, 3, 2, 3, 3, 3, 4, 3, 4],\r\n        [4, 3, 3, 3, 3, 3, 2, 3, 3, 3, 3, 3, 4],\r\n        [4, 3, 4, 3, 0, 3, 0, 3, 0, 3, 4, 3, 4],\r\n        [4, 3, 4, 0, 0, 3, 0, 3, 0, 0, 4, 3, 4],\r\n        [4, 4, 4, 0, 0, 0, 0, 0, 0, 0, 4, 4, 4],\r\n        [0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0],\r\n        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n      ],\r\n      1: [\r\n        [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 2, 2, 2, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 2, 2, 2, 2, 2, 0, 0, 0, 0],\r\n        [0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0],\r\n        [0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0],\r\n        [0, 0, 0, 2, 0, 0, 2, 0, 0, 2, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 3, 2, 3, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 3, 2, 3, 0, 0, 0, 0, 0],\r\n        [0, 1, 0, 0, 0, 3, 2, 3, 0, 0, 0, 1, 0],\r\n        [0, 1, 0, 0, 0, 3, 2, 3, 0, 0, 0, 1, 0],\r\n        [4, 4, 4, 0, 3, 3, 2, 3, 3, 0, 4, 4, 4],\r\n        [4, 3, 4, 3, 3, 3, 2, 3, 3, 3, 4, 3, 4],\r\n        [4, 3, 4, 3, 3, 3, 2, 3, 3, 3, 4, 3, 4],\r\n        [4, 3, 3, 3, 3, 3, 2, 3, 3, 3, 3, 3, 4],\r\n        [4, 3, 4, 3, 0, 3, 0, 3, 0, 3, 4, 3, 4],\r\n        [4, 3, 4, 0, 0, 3, 0, 3, 0, 0, 4, 3, 4],\r\n        [4, 4, 4, 0, 0, 0, 0, 0, 0, 0, 4, 4, 4],\r\n        [0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0],\r\n        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n      ]\r\n    };\r\n    let color = {\r\n      1: \"yellow\",\r\n      2: \"red\",\r\n      3: \"aqua\",\r\n      4: \"brown\"\r\n    };\r\n    w = w / 13;\r\n    h = h / 21;\r\n    navecita[tipo].forEach((fila, fi) => {\r\n      fila.forEach((columna, ci) => {\r\n        if (columna > 0) {\r\n          ctx.fillStyle = color[columna];\r\n          ctx.fillRect(x + ci * w, y + fi * h, w, h);\r\n        }\r\n      });\r\n    });\r\n  }\r\n  cambiarDeTama√±o() {\r\n    this.w = this.juego.wj / 11;\r\n    this.h = this.juego.h / 15;\r\n    this.limite.i = this.juego.wi;\r\n    this.limite.d = this.juego.wd;\r\n    this.posicion.y = this.juego.h - this.h - 20;\r\n  }\r\n  izquierda() {\r\n    this.velocidad.x = -this.velocidad.max;\r\n  }\r\n  derecha() {\r\n    this.velocidad.x = this.velocidad.max;\r\n  }\r\n  detener() {\r\n    this.velocidad.x = 0;\r\n  }\r\n}\r\n","export function colision(objeto1, objeto2) {\r\n    let p = {\r\n        d: objeto1.posicion.y + objeto1.h,\r\n        u: objeto1.posicion.y,\r\n        l: objeto1.posicion.x,\r\n        r: objeto1.posicion.x + objeto1.w,\r\n    };\r\n    let o = {\r\n        d: objeto2.posicion.y + objeto2.h,\r\n        u: objeto2.posicion.y,\r\n        l: objeto2.posicion.x,\r\n        r: objeto2.posicion.x + objeto2.w\r\n    };\r\n\r\n    if (p.r >= o.l && p.l <= o.r && p.u < o.d && p.d > o.u) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n","import { colision } from \"./colision.js\";\r\nexport default class Laser {\r\n  constructor(juego, x, y, tipo) {\r\n    this.juego = juego;\r\n    this.w = this.juego.w / 150;\r\n    this.h = this.juego.h / 25;\r\n    this.posicion = {\r\n      x: x,\r\n      y: y - this.h\r\n    };\r\n    this.velocidad = {\r\n      n: -10,\r\n      i: 8\r\n    };\r\n    this.tipo = tipo;\r\n    this.color = {\r\n      n: \"#f59b2f\",\r\n      i: \"white\"\r\n    };\r\n    this.borde = 1;\r\n  }\r\n  dibujar() {\r\n    this.disparo(\r\n      this.juego.ctx,\r\n      this.posicion.x,\r\n      this.posicion.y,\r\n      this.w,\r\n      this.h,\r\n      this.color[this.tipo],\r\n      this.color[this.tipo],\r\n      this.borde\r\n    );\r\n  }\r\n  actualizar() {\r\n    this.cambiarDeTama√±o();\r\n    this.posicion.y += this.velocidad[this.tipo];\r\n    if (this.tipo === \"n\") {\r\n      this.juego.invasores.forEach(invasor => {\r\n        if (colision(invasor, this)) {\r\n          this.juego.puntos += 100;\r\n          invasor.energia--;\r\n          this.juego.sonidoImpacto.play();\r\n          this.posicion.y = -20;\r\n        }\r\n      });\r\n    } else {\r\n      if (colision(this.juego.nave, this)) {\r\n        this.juego.vidas--;\r\n        this.juego.canones = 0;\r\n        this.juego.limiteDeLaser--;\r\n        this.juego.nave.velocidad.max--;\r\n        this.juego.autofire = 0;\r\n        this.juego.sonidoImpactoNave.play();\r\n      }\r\n    }\r\n  }\r\n  disparo(ctx, x, y, w, h, exterior, interior, borde) {\r\n    //Circulo Exterior\r\n    ctx.fillStyle = exterior;\r\n    ctx.fillRect(x, y, w, h);\r\n    ctx.fillStyle = interior;\r\n    ctx.fillRect(x + borde, y + borde, w - borde * 2, h - borde * 2);\r\n  }\r\n\r\n  cambiarDeTama√±o() {\r\n    this.w = this.juego.w / 150;\r\n    this.h = this.juego.h / 20;\r\n  }\r\n}\r\n","export default class Entradas {\r\n  constructor(juego) {\r\n    document.addEventListener(\"keydown\", (event) => {\r\n      switch (event.keyCode) {\r\n        case 27:\r\n          juego.pausa();\r\n          break;\r\n        case 32:\r\n          juego.iniciar();\r\n          break;\r\n        case 37:\r\n          juego.nave.izquierda();\r\n          break;\r\n        case 38:\r\n          juego.agregarLaser(\"n\");\r\n          break;\r\n        case 39:\r\n          juego.nave.derecha();\r\n          break;\r\n        case 77:\r\n          juego.sonidoFondo.stop();\r\n          break;\r\n        case 83:\r\n          juego.sonidoFondo.play();\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n    document.addEventListener(\"keyup\", (event) => {\r\n      switch (event.keyCode) {\r\n        case 37:\r\n          juego.nave.detener();\r\n          break;\r\n        case 39:\r\n          juego.nave.detener();\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n  }\r\n}\r\n","export default class Dashboard {\r\n  constructor(juego) {\r\n    this.juego = juego;\r\n    this.w = this.juego.w;\r\n    this.h = this.juego.h;\r\n    this.wd1 = (this.w / 10) * 2;\r\n    this.wd2 = (this.w / 10) * 2;\r\n    this.wj = (this.w / 10) * 6;\r\n    this.posicion = {\r\n      x: 0,\r\n      y: 0,\r\n      x1: (this.w / 10) * 8,\r\n      y1: 0\r\n    };\r\n  }\r\n  dibujar() {\r\n    //Dibuja el centro\r\n    let grd = this.juego.ctx.createLinearGradient(0, 0, 0, this.h);\r\n    grd.addColorStop(0, \"#5b6577\");\r\n    grd.addColorStop(1, \"#2c313a\");\r\n    this.juego.ctx.fillStyle = \"black\";\r\n    this.juego.ctx.fillRect(this.wd1, 0, this.wj, this.h);\r\n\r\n    //Datos a mostrar\r\n    let grd1 = this.juego.ctx.createLinearGradient(0, 0, 0, this.h);\r\n    grd1.addColorStop(0, \"#4f5764\");\r\n    grd1.addColorStop(1, \"#2e333a\");\r\n\r\n    //Margen Izquierdo\r\n    this.juego.ctx.fillStyle = \"#999900\";\r\n    this.juego.ctx.fillRect(this.posicion.x, this.posicion.y, this.wd1, this.h);\r\n    this.juego.ctx.fillStyle = grd1;\r\n    this.juego.ctx.fillRect(\r\n      this.posicion.x + 2,\r\n      this.posicion.y + 2,\r\n      this.wd1 - 4,\r\n      this.h - 4\r\n    );\r\n    //Margen Derecho\r\n    this.juego.ctx.fillStyle = \"#999900\";\r\n    this.juego.ctx.fillRect(\r\n      this.posicion.x1,\r\n      this.posicion.y1,\r\n      this.wd2,\r\n      this.h\r\n    );\r\n    this.juego.ctx.fillStyle = grd1;\r\n    this.juego.ctx.fillRect(\r\n      this.posicion.x1 + 2,\r\n      this.posicion.y1 + 2,\r\n      this.wd2 - 4,\r\n      this.h - 4\r\n    );\r\n\r\n    //Panel Izquierdo\r\n    this.juego.ctx.fillStyle = \"#f59b2f\";\r\n    this.juego.ctx.textAling = \"center\";\r\n    this.juego.ctx.font = this.wd1 / 10 + \"px ARKANOID\";\r\n    this.juego.ctx.fillText(\r\n      \"SPACE\",\r\n      this.posicion.x + this.wd1 / 6,\r\n      this.posicion.y + this.h / 12\r\n    );\r\n    this.juego.ctx.fillText(\r\n      \"INVADER\",\r\n      this.posicion.x + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 2\r\n    );\r\n    this.juego.ctx.fillText(\r\n      \"SCORE:\",\r\n      this.posicion.x + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 4\r\n    );\r\n    this.juego.ctx.fillText(\r\n      \"LEVEL:\",\r\n      this.posicion.x + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 8\r\n    );\r\n    this.juego.ctx.fillText(\r\n      \"ADRIANEVIL\",\r\n      this.posicion.x + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 10\r\n    );\r\n    this.juego.ctx.fillText(\r\n      \"C I D\",\r\n      this.posicion.x + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 11\r\n    );\r\n\r\n    this.juego.ctx.fillStyle = \"yellow\";\r\n    this.juego.ctx.textAling = \"center\";\r\n    this.juego.ctx.font = this.wd1 / 9 + \"px Consolas\";\r\n    this.juego.ctx.fillText(\r\n      this.juego.puntos,\r\n      this.posicion.x + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 5\r\n    );\r\n    this.juego.ctx.fillText(\r\n      this.juego.nivel,\r\n      this.posicion.x + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 9\r\n    );\r\n\r\n    //Panel Derecho\r\n    this.juego.ctx.fillStyle = \"#f59b2f\";\r\n    this.juego.ctx.textAling = \"center\";\r\n    this.juego.ctx.font = this.wd1 / 10 + \"px ARKANOID\";\r\n    this.juego.ctx.fillText(\r\n      \"SPEED\",\r\n      this.wd1 + this.wj + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 2\r\n    );\r\n    this.juego.ctx.fillText(\r\n      \"LASER\",\r\n      this.wd1 + this.wj + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 4\r\n    );\r\n    this.juego.ctx.fillText(\r\n      \"ENERGY:\",\r\n      this.wd1 + this.wj + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 6\r\n    );\r\n\r\n    this.juego.ctx.fillStyle = \"yellow\";\r\n    this.juego.ctx.textAling = \"center\";\r\n    this.juego.ctx.font = this.wd1 / 9 + \"px Consolas\";\r\n    this.juego.ctx.fillText(\r\n      this.juego.nave.velocidad.max,\r\n      this.wd1 + this.wj + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 3\r\n    );\r\n    this.juego.ctx.fillText(\r\n      this.juego.limiteDeLaser,\r\n      this.wd1 + this.wj + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 5\r\n    );\r\n    this.juego.ctx.fillText(\r\n      this.juego.vidas + \"%\",\r\n      this.wd1 + this.wj + this.wd1 / 6,\r\n      this.posicion.y + (this.h / 12) * 7\r\n    );\r\n    if (this.juego.autofire > 0)\r\n      this.juego.ctx.fillText(\r\n        \"AUTO FIRE\",\r\n        this.wd1 + this.wj + this.wd1 / 6,\r\n        this.posicion.y + (this.h / 12) * 8\r\n      );\r\n  }\r\n  actualizar(tiempoDelta) {\r\n    this.cambiarDeTama√±o();\r\n  }\r\n\r\n  cambiarDeTama√±o() {\r\n    this.w = this.juego.w;\r\n    this.h = this.juego.h;\r\n    this.wd1 = (this.w / 10) * 2;\r\n    this.wd2 = (this.w / 10) * 2;\r\n    this.wj = (this.w / 10) * 6;\r\n    this.posicion.x = 0;\r\n    this.posicion.y = 0;\r\n    this.posicion.x1 = (this.w / 10) * 8;\r\n    this.posicion.y1 = 0;\r\n\r\n    //console.log(\"margenDerecho: \" + this.posicion.x1);\r\n  }\r\n}\r\n","const ESTADO = {\r\n  PAUSA: 0,\r\n  NUEVO: 1,\r\n  CORRIENDO: 2,\r\n  NUEVONIVEL: 3,\r\n  GAMEOVER: 4\r\n};\r\nexport default class Menu {\r\n  constructor(juego) {\r\n    this.juego = juego;\r\n    this.w = this.juego.w;\r\n    this.h = this.juego.h;\r\n    this.x = 0;\r\n    this.y = 0;\r\n  }\r\n  dibujar(ctx) {\r\n    switch (this.juego.estado) {\r\n      case ESTADO.NUEVO:\r\n        //Datos a mostrar\r\n        this.juego.ctx.fillStyle = \"rgba(255,255,255,0.5)\";\r\n        this.juego.ctx.fillRect(0, 0, this.w, this.h);\r\n        this.juego.ctx.fillStyle = \"black\";\r\n        this.juego.ctx.textAling = \"start\";\r\n        this.juego.ctx.font = \"30px ARKANOID\";\r\n        this.juego.ctx.fillText(\"ESPACIO PARA INICIAR\", this.w / 3, this.h / 2);\r\n        break;\r\n      case ESTADO.PAUSA:\r\n        //Datos a mostrar\r\n        this.juego.ctx.fillStyle = \"rgba(255,255,255,0.5)\";\r\n        this.juego.ctx.fillRect(0, 0, this.w, this.h);\r\n        this.juego.ctx.fillStyle = \"black\";\r\n        this.juego.ctx.textAling = \"start\";\r\n        this.juego.ctx.font = \"30px ARKANOID\";\r\n        this.juego.ctx.fillText(\"PAUSA\", this.w / 3, this.h / 2);\r\n        break;\r\n      case ESTADO.GAMEOVER:\r\n        //Datos a mostrar\r\n        this.juego.ctx.fillStyle = \"rgb(255,255,255)\";\r\n        this.juego.ctx.fillRect(0, 0, this.w, this.h);\r\n        this.juego.ctx.fillStyle = \"black\";\r\n        this.juego.ctx.textAling = \"center\";\r\n        this.juego.ctx.font = \"30px ARKANOID\";\r\n        this.juego.ctx.fillText(\"GAME OVER\", this.w / 3, this.h / 2);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  actualizar(tiempoDelta) {\r\n    this.cambiarDeTama√±o();\r\n  }\r\n\r\n  cambiarDeTama√±o() {\r\n    this.w = this.juego.w;\r\n    this.h = this.juego.h;\r\n  }\r\n}\r\n","export default class Invasor {\r\n  constructor(juego, fila, columna, tipo) {\r\n    this.juego = juego;\r\n    this.fila = fila;\r\n    this.columna = columna;\r\n    this.w = juego.wj / 14;\r\n    this.h = juego.h / 15;\r\n    this.wi = juego.wi;\r\n    this.wd = juego.wd;\r\n    this.posicion = {\r\n      x: this.wi + this.w + this.columna * (this.w + 10),\r\n      y: 10 + this.fila * (this.h + 10)\r\n    };\r\n    this.tipo = tipo;\r\n    this.energia = 1000;\r\n    this.pos = 1;\r\n    this.mov = Math.floor(Math.random() * 80);\r\n  }\r\n  dibujar() {\r\n    this.crearInvasor(\r\n      this.juego.ctx,\r\n      this.posicion.x,\r\n      this.posicion.y + this.juego.invasorVelocidad.y,\r\n      this.w,\r\n      this.h,\r\n      this.tipo,\r\n      this.pos\r\n    );\r\n  }\r\n  actualizar() {\r\n    //this.cambiarDeTama√±o();\r\n    if (Math.floor(Math.random() * 300) === 0) {\r\n      this.juego.agregarLaser(\"i\", this);\r\n      this.juego.sonidoDisparo.play();\r\n    }\r\n\r\n    this.mov++;\r\n    if (this.mov === 40) {\r\n      this.pos = 2;\r\n    }\r\n    if (this.mov === 80) {\r\n      this.pos = 1;\r\n      this.mov = 0;\r\n    }\r\n\r\n    this.posicion.x += this.juego.invasorVelocidad.x;\r\n\r\n    if (this.posicion.x <= this.wi || this.posicion.x + this.w >= this.wd) {\r\n      //console.log( \"invasor x: \" + this.posicion.x + \" juego Margen I: \" + this.juego.wi + \" juego Margen D: \" + this.juego.wd);\r\n      this.juego.invasorVelocidad.x = -this.juego.invasorVelocidad.x;\r\n      this.juego.cambiaAlturaInvasor(10);\r\n      if (this.posicion.x <= this.wi) this.posicion.x = this.wi + 1;\r\n      else this.posicion.x = this.wd - this.w - 1;\r\n    }\r\n  }\r\n  crearInvasor(ctx, x, y, w, h, tipo, pos) {\r\n    let figura = {\r\n      1: {\r\n        1: [\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n          [0, 1, 1, 2, 1, 1, 1, 2, 1, 1, 0],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],\r\n          [1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1],\r\n          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0]\r\n        ],\r\n        2: [\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1],\r\n          [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],\r\n          [1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1],\r\n          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0]\r\n        ],\r\n        3: [\r\n          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]\r\n        ],\r\n        color: {\r\n          1: \"blue\",\r\n          2: \"gray\"\r\n        },\r\n        energia: 1\r\n      },\r\n      2: {\r\n        1: [\r\n          [0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0],\r\n          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 2, 2, 1, 2, 2, 1, 0, 0],\r\n          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],\r\n          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1]\r\n        ],\r\n        2: [\r\n          [0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0],\r\n          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 2, 2, 1, 2, 2, 1, 0, 0],\r\n          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0],\r\n          [1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1],\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 10, 0, 0]\r\n        ],\r\n        3: [\r\n          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]\r\n        ],\r\n        color: {\r\n          1: \"green\",\r\n          2: \"gray\"\r\n        },\r\n        energia: 3\r\n      },\r\n      3: {\r\n        1: [\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1],\r\n          [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],\r\n          [1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1],\r\n          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0]\r\n        ],\r\n        2: [\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n          [1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0]\r\n        ],\r\n        3: [\r\n          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]\r\n        ],\r\n        color: {\r\n          1: \"red\",\r\n          2: \"white\"\r\n        },\r\n        energia: 4\r\n      },\r\n      4: {\r\n        1: [\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 0],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1],\r\n          [1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1],\r\n          [0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0],\r\n          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0]\r\n        ],\r\n        2: [\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 0],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1],\r\n          [1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1],\r\n          [0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0],\r\n          [0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0]\r\n        ],\r\n        3: [\r\n          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]\r\n        ],\r\n        color: {\r\n          1: \"yellow\",\r\n          2: \"white\"\r\n        },\r\n        energia: 5\r\n      },\r\n      5: {\r\n        1: [\r\n          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n          [1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1],\r\n          [1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1]\r\n        ],\r\n        2: [\r\n          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n          [1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1],\r\n          [1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]\r\n        ],\r\n        3: [\r\n          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]\r\n        ],\r\n        color: {\r\n          1: \"orange\",\r\n          2: \"white\"\r\n        },\r\n        energia: 6\r\n      },\r\n      6: {\r\n        1: [\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n          [1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1]\r\n        ],\r\n        2: [\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n          [1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1],\r\n          [1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n          [0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]\r\n        ],\r\n        3: [\r\n          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]\r\n        ],\r\n        color: {\r\n          1: \"pink\",\r\n          2: \"white\"\r\n        },\r\n        energia: 7\r\n      },\r\n      7: {\r\n        1: [\r\n          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n          [0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0],\r\n          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n          [0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0],\r\n          [0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0],\r\n          [1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1]\r\n        ],\r\n        2: [\r\n          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n          [0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0],\r\n          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n          [0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0],\r\n          [1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1],\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n        ],\r\n        3: [\r\n          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]\r\n        ],\r\n        color: {\r\n          1: \"purple\",\r\n          2: \"white\"\r\n        },\r\n        energia: 8\r\n      },\r\n      8: {\r\n        1: [\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n          [1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1],\r\n          [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],\r\n          [1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1],\r\n          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n          [0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0],\r\n          [1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1],\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n        ],\r\n        2: [\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n          [1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1],\r\n          [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],\r\n          [0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0],\r\n          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n          [0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0]\r\n        ],\r\n        3: [\r\n          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\r\n          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],\r\n          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],\r\n          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],\r\n          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]\r\n        ],\r\n        color: {\r\n          1: \"white\",\r\n          2: \"orange\"\r\n        },\r\n        energia: 9\r\n      }\r\n    };\r\n    let wf = w / 11;\r\n    let hf = h / 8;\r\n\r\n    figura[tipo][pos].forEach((fila, filaIndex) => {\r\n      fila.forEach((columna, columnaIndex) => {\r\n        if (columna >= 1) {\r\n          ctx.fillStyle = figura[tipo].color[columna];\r\n          ctx.fillRect(x + wf * columnaIndex, y + hf * filaIndex, wf, hf);\r\n        }\r\n      });\r\n    });\r\n\r\n    if (this.energia >= 900) this.energia = figura[tipo].energia;\r\n  }\r\n\r\n  cambiarDeTama√±o() {\r\n    let ancho = this.juego.wj / 14;\r\n    let alto = this.juego.h / 15;\r\n    this.posicion.x -= this.wi - this.w;\r\n    this.wi = this.juego.wi + this.w;\r\n    this.w = ancho;\r\n    this.posicion.x += this.wi + this.w;\r\n    this.wd = this.juego.wi - this.w;\r\n    this.h = alto;\r\n  }\r\n}\r\n","import Invasor from \"./invasor.js\";\r\n\r\nexport function crearNivel(juego, nivel) {\r\n  let regreso = [];\r\n  nivel.forEach((fila, filaIndex) => {\r\n    fila.forEach((columna, columnaIndex) => {\r\n      if (columna > 0)\r\n        regreso.push(new Invasor(juego, filaIndex, columnaIndex, columna));\r\n    });\r\n  });\r\n  return regreso;\r\n}\r\n\r\nexport function nivelRandom(level) {\r\n  let dificultad = parseInt(level / 5 + 1, 10);\r\n  let dificultades = {\r\n    1: {\r\n      tiposDeInvasor: 2,\r\n      lineas: 2\r\n    },\r\n    2: {\r\n      tiposDeInvasor: 3,\r\n      lineas: 3\r\n    },\r\n    3: {\r\n      tiposDeInvasor: 4,\r\n      lineas: 4\r\n    },\r\n    4: {\r\n      tiposDeInvasor: 5,\r\n      lineas: 5\r\n    },\r\n    5: {\r\n      tiposDeInvasor: 6,\r\n      lineas: 6\r\n    },\r\n    6: {\r\n      tiposDeInvasor: 7,\r\n      lineas: 7\r\n    },\r\n    7: {\r\n      tiposDeInvasor: 8,\r\n      lineas: 8\r\n    },\r\n    8: {\r\n      tiposDeInvasor: 9,\r\n      lineas: 9\r\n    }\r\n  };\r\n  let nivel = [];\r\n  let filas = dificultades[dificultad].lineas;\r\n\r\n  for (let i = 1; i <= filas; i++) {\r\n    let fila = [0, 0, 0, 0, 0, 0, 0, 0];\r\n    fila.forEach((nave, index) => {\r\n      fila[index] = Math.floor(\r\n        Math.random() * dificultades[dificultad].tiposDeInvasor\r\n      );\r\n    });\r\n    nivel.push(fila);\r\n  }\r\n  return nivel;\r\n}\r\n","export function sound(src, loop) {\r\n    this.sound = document.createElement(\"audio\");\r\n    this.sound.src = src;\r\n    this.sound.setAttribute(\"preload\", \"auto\");\r\n    this.sound.setAttribute(\"controls\", \"none\");\r\n    if(loop)\r\n    this.sound.setAttribute(\"loop\", true);\r\n    this.sound.style.display = \"none\";\r\n    document.body.appendChild(this.sound);\r\n    this.play = function(){\r\n      this.sound.play();\r\n    }\r\n    this.stop = function(){\r\n      this.sound.pause();\r\n    }\r\n  }\r\n\r\n  \r\nexport function tomarDatosArduinio(juego) {\r\n    const p1 = requestPromesa(\"GET\", \"http://192.168.0.91\");\r\n    Promise.all([p1]).then(function (respuestas) {\r\n        var myObj = JSON.parse(respuestas[0]);\r\n        juego.online = myObj.valor;\r\n        //console.log(\"valor de juego.online:\" + juego.online);\r\n    }).catch(function (statusError) { console.error(statusError) });\r\n\r\n}\r\n\r\nexport function requestPromesa(method, url, body) {\r\n    return new Promise(function (resolve, reject) {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.open(method, url);\r\n        xhr.onload = function () {\r\n            if (xhr.status >= 200 && xhr.status < 300) {\r\n                resolve(xhr.response);\r\n            } else {\r\n                reject({\r\n                    status: xhr.status,\r\n                    statusText: xhr.statusText\r\n                });\r\n            }\r\n        };\r\n        xhr.onerror = function () {\r\n            reject({\r\n                status: xhr.status,\r\n                statusText: xhr.statusText\r\n            });\r\n        };\r\n        xhr.send(body);\r\n    });\r\n}","import { colision } from \"./colision.js\";\r\nconst TIPOS = {\r\n  0: {\r\n    autofire: 0,\r\n    vida: 0,\r\n    laser: 1,\r\n    velocidad: 0,\r\n    canones: 0,\r\n    nombre: \"L\",\r\n    color: \"red\",\r\n    letra: \"white\"\r\n  },\r\n  1: {\r\n    autofire: 0,\r\n    vida: 10,\r\n    laser: 0,\r\n    velocidad: 0,\r\n    canones: 0,\r\n    nombre: \"E\",\r\n    color: \"blue\",\r\n    letra: \"white\"\r\n  },\r\n  2: {\r\n    autofire: 0,\r\n    vida: 0,\r\n    laser: 0,\r\n    velocidad: 1,\r\n    canones: 0,\r\n    nombre: \"S\",\r\n    color: \"yellow\",\r\n    letra: \"black\"\r\n  },\r\n  3: {\r\n    autofire: 0,\r\n    vida: 10,\r\n    laser: 1,\r\n    velocidad: 1,\r\n    canones: 0,\r\n    nombre: \"L-E-S\",\r\n    color: \"green\",\r\n    letra: \"white\"\r\n  },\r\n  4: {\r\n    autofire: 1,\r\n    vida: 0,\r\n    laser: 0,\r\n    velocidad: 0,\r\n    canones: 0,\r\n    nombre: \"A\",\r\n    color: \"green\",\r\n    letra: \"white\"\r\n  },\r\n  5: {\r\n    autofire: 1,\r\n    vida: 0,\r\n    laser: 0,\r\n    velocidad: 0,\r\n    canones: 3,\r\n    nombre: \"L X 3\",\r\n    color: \"brown\",\r\n    letra: \"white\"\r\n  }\r\n};\r\nexport default class Powerup {\r\n  constructor(juego, x, y, tipo) {\r\n    this.juego = juego;\r\n    this.posicion = {\r\n      x: x,\r\n      y: y\r\n    };\r\n    this.limite = {\r\n      i: this.juego.wi,\r\n      d: this.juego.wd\r\n    };\r\n    this.w = 0;\r\n    this.h = 0;\r\n    this.velocidad = {\r\n      x: -4,\r\n      y: 0\r\n    };\r\n    this.tipo = tipo;\r\n  }\r\n  dibujar() {\r\n    this.powerUP(\r\n      this.juego.ctx,\r\n      this.posicion.x,\r\n      this.posicion.y,\r\n      this.w,\r\n      this.h\r\n    );\r\n  }\r\n  actualizar() {\r\n    this.cambiarDeTama√±o();\r\n    this.posicion.x += this.velocidad.x;\r\n    if (this.juego.laserNave.length > 0) {\r\n      this.juego.laserNave.forEach(laser => {\r\n        if (colision(laser, this)) {\r\n          this.juego.soundCapturado.play();\r\n          this.posicion.x = -550;\r\n          this.juego.vidas += TIPOS[this.tipo].vida;\r\n          this.juego.limiteDeLaser += TIPOS[this.tipo].laser;\r\n          this.juego.nave.velocidad.max += TIPOS[this.tipo].velocidad;\r\n          this.juego.autofire += TIPOS[this.tipo].autofire;\r\n          this.juego.canones += TIPOS[this.tipo].canones;\r\n        }\r\n      });\r\n    }\r\n  }\r\n  powerUP(ctx, x, y, w, h) {\r\n    ctx.fillStyle = TIPOS[this.tipo].color;\r\n    ctx.fillRect(x, y, w, h);\r\n    ctx.beginPath();\r\n    ctx.arc(x, y + h / 2, h / 2, 0, 2 * Math.PI);\r\n    ctx.fill();\r\n    ctx.beginPath();\r\n    ctx.arc(x + w, y + h / 2, h / 2, 0, 2 * Math.PI);\r\n    ctx.fill();\r\n\r\n    ctx.fillStyle = TIPOS[this.tipo].letra;\r\n    ctx.textAling = \"center\";\r\n    ctx.font = (h / 4) * 3 + \"px console\";\r\n    ctx.fillText(\r\n      TIPOS[this.tipo].nombre,\r\n      this.posicion.x + w / 2,\r\n      this.posicion.y + this.h / 2 + 2\r\n    );\r\n  }\r\n  cambiarDeTama√±o() {\r\n    this.w = this.juego.wj / 11;\r\n    this.h = this.juego.h / 30;\r\n    this.limite.i = this.juego.wi;\r\n    this.limite.d = this.juego.wd;\r\n  }\r\n}\r\n","export default class Estrella {\r\n  constructor(juego, x, y, picos, rI, rE, opacity, angulo) {\r\n    this.juego = juego;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.picos = picos;\r\n    this.radioI = rI;\r\n    this.radioE = rE;\r\n    this.opacity = opacity;\r\n    this.angulo = angulo;\r\n    this.factor = 1;\r\n    this.increment = Math.random() * 0.03;\r\n  }\r\n  dibujar(ctx) {\r\n    this.estrella(\r\n      this.juego.ctx,\r\n      this.x,\r\n      this.y,\r\n      this.picos,\r\n      this.radioI,\r\n      this.radioE,\r\n      this.opacity,\r\n      this.angulo\r\n    );\r\n  }\r\n  actualizar(tiempoDelta) {\r\n    this.y += (this.juego.nave.velocidad.max * 6) / 60;\r\n    if (this.opacity > 1) {\r\n      this.factor = -1;\r\n    } else if (this.opacity <= 0) {\r\n      this.factor = 1;\r\n    }\r\n\r\n    this.opacity += this.increment * this.factor;\r\n  }\r\n\r\n  estrella(\r\n    ctx,\r\n    centerX,\r\n    centerY,\r\n    arms,\r\n    innerRadius,\r\n    outerRadius,\r\n    opacidad,\r\n    startAngle\r\n  ) {\r\n    startAngle = (startAngle * Math.PI) / 180 || 0;\r\n    let step = Math.PI / arms,\r\n      angle = startAngle,\r\n      hyp,\r\n      x,\r\n      y;\r\n    ctx.fillStyle = \"rgba(255, 255, 200, \" + opacidad + \")\";\r\n    ctx.beginPath();\r\n    for (let i = 0, len = 2 * arms; i < len; i++) {\r\n      hyp = i & 1 ? innerRadius : outerRadius;\r\n      x = centerX + Math.cos(angle) * hyp;\r\n      y = centerY + Math.sin(angle) * hyp;\r\n      angle += step;\r\n      ctx.lineTo(x, y);\r\n    }\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.stroke();\r\n  }\r\n}\r\n","import Nave from \"./nave.js\";\r\nimport Laser from \"./laser.js\";\r\nimport Entradas from \"./entradas.js\";\r\nimport Dashboard from \"./dashboard.js\";\r\nimport Menu from \"./menu.js\";\r\nimport { crearNivel, nivelRandom } from \"./niveles.js\";\r\nimport { sound } from \"./funciones.js\";\r\nimport Powerup from \"./powerup.js\";\r\nimport Estrella from \"./estrella.js\";\r\nconst ESTADO = {\r\n  PAUSA: 0,\r\n  NUEVO: 1,\r\n  CORRIENDO: 2,\r\n  NUEVONIVEL: 3,\r\n  GAMEOVER: 4\r\n};\r\nexport default class Juego {\r\n  constructor(canvas) {\r\n    this.canvas = canvas;\r\n    this.ctx = canvas.getContext(\"2d\");\r\n    this.w = document.documentElement.clientWidth - 40;\r\n    this.h = document.documentElement.clientHeight - 40;\r\n    this.wi = (this.w / 10) * 2;\r\n    this.wd = (this.w / 10) * 8;\r\n    this.wj = (this.w / 10) * 6;\r\n    this.nave = new Nave(this);\r\n    this.numeroEstrellas = Math.round(Math.random() * 50) + 25;\r\n    this.invasorVelocidad = {\r\n      x: 2,\r\n      y: 1\r\n    };\r\n    this.laserInvasor = [];\r\n    this.laserNave = [];\r\n    this.entradas = new Entradas(this);\r\n    this.invasores = [];\r\n    this.powerUPS = [];\r\n    this.dashboard = new Dashboard(this);\r\n    this.estrellas = [];\r\n    this.estado = ESTADO.NUEVO;\r\n    this.nivel = 1;\r\n    this.vidas = 100;\r\n    this.puntos = 0;\r\n    this.limiteDeLaser = 1;\r\n    this.autofire = 0;\r\n    this.canones = 0;\r\n    this.menu = new Menu(this);\r\n    this.sonidoIniciar = new sound(\"/sonido/iniciar.mp3\", false);\r\n    this.sonidoFondo = new sound(\"/sonido/fondo.mp3\", true);\r\n    this.sonidoNivel = new sound(\"/sonido/nuevoNivel.mp3\", false);\r\n    this.sonidoOver = new sound(\"/sonido/gameOver.mp3\", false);\r\n    this.sonidoDisparoNave = new sound(\"/sonido/disparoLaserNave.mp3\", false);\r\n    this.soundCapturado = new sound(\"/sonido/powerUp.mp3\");\r\n    this.sonidoDisparo = new sound(\"/sonido/disparoLaserInvasor.mp3\", false);\r\n    this.sonidoImpacto = new sound(\"/sonido/laserImpacta2.mp3\");\r\n    this.sonidoImpactoNave = new sound(\"/sonido/naveExplota.mp3\");\r\n  }\r\n\r\n  dibujar() {\r\n    if (this.estado === ESTADO.CORRIENDO || this.estado === ESTADO.PAUSA) {\r\n      [this.dashboard, ...this.estrellas, this.nave].forEach(Objecto =>\r\n        Objecto.dibujar()\r\n      );\r\n      [\r\n        ...this.invasores,\r\n        ...this.laserNave,\r\n        ...this.laserInvasor,\r\n        ...this.powerUPS\r\n      ].forEach(Objecto => Objecto.dibujar());\r\n    }\r\n    this.menu.dibujar();\r\n  }\r\n  actualizar(tiempoDelta) {\r\n    if (this.autofire > 0) this.agregarLaser(\"n\");\r\n    if (this.vidas > 100) this.vidas = 100;\r\n    if (this.limiteDeLaser > 10) this.limiteDeLaser = 10;\r\n    if (this.limiteDeLaser < 1) this.limiteDeLaser = 1;\r\n    if (this.nave.velocidad.max > 40) this.nave.velocidad.max = 40;\r\n    if (this.nave.velocidad.max < 10) this.nave.velocidad.max = 10;\r\n    this.cambiarDeTama√±o();\r\n\r\n    if (this.estado === ESTADO.CORRIENDO) {\r\n      if (this.estrellas.length < this.numeroEstrellas)\r\n        this.agregarEstrella(true);\r\n      this.invasores = this.invasores.filter(invasor => invasor.energia > 0);\r\n\r\n      if (this.invasores.length > 0) {\r\n        if (Math.floor(Math.random() * 100) === 0) {\r\n          this.agregarPowerUP();\r\n        }\r\n        this.powerUPS = this.powerUPS.filter(\r\n          power => power.posicion.x > this.wi\r\n        );\r\n        this.laserNave = this.laserNave.filter(laser => laser.posicion.y >= 0);\r\n        this.laserInvasor = this.laserInvasor.filter(\r\n          laser => laser.posicion.y <= this.h\r\n        );\r\n        this.estrellas = this.estrellas.filter(estrella => estrella.y < this.h);\r\n        [\r\n          ...this.powerUPS,\r\n          ...this.invasores,\r\n          ...this.laserNave,\r\n          ...this.laserInvasor,\r\n          this.dashboard,\r\n          ...this.estrellas,\r\n          this.nave\r\n        ].forEach(power => power.actualizar());\r\n      } else {\r\n        this.estado = ESTADO.NUEVONIVEL;\r\n        this.iniciar();\r\n      }\r\n    }\r\n    this.menu.actualizar(tiempoDelta);\r\n    if (this.vidas <= 0) {\r\n      this.estado = ESTADO.GAMEOVER;\r\n      this.sonidoFondo.stop();\r\n      this.sonidoOver.play();\r\n    }\r\n  }\r\n  iniciar() {\r\n    if (this.estado === ESTADO.NUEVO || this.estado === ESTADO.GAMEOVER) {\r\n      this.restablecer();\r\n      this.sonidoOver.stop();\r\n      this.sonidoFondo.play();\r\n      this.nivel = 1;\r\n      this.vidas = 100;\r\n      this.puntos = 0;\r\n      this.restablecer();\r\n      this.invasores = crearNivel(this, nivelRandom(this.nivel));\r\n      for (let i = 0; i <= this.numeroEstrellas; i++) {\r\n        this.agregarEstrella();\r\n      }\r\n\r\n      this.estado = ESTADO.CORRIENDO;\r\n    }\r\n    if (this.estado === ESTADO.NUEVONIVEL) {\r\n      this.restablecer();\r\n      this.sonidoNivel.play();\r\n      this.nivel++;\r\n      this.invasores = crearNivel(this, nivelRandom(this.nivel));\r\n      this.restablecer();\r\n      this.estado = ESTADO.CORRIENDO;\r\n    }\r\n  }\r\n  pausa() {\r\n    if (this.estado === ESTADO.PAUSA) {\r\n      this.estado = ESTADO.CORRIENDO;\r\n    } else {\r\n      this.estado = ESTADO.PAUSA;\r\n    }\r\n  }\r\n  restablecer() {\r\n    this.invasorVelocidad.x++;\r\n    this.invasorVelocidad.y = 0;\r\n  }\r\n  ancho() {\r\n    return this.w;\r\n  }\r\n  alto() {\r\n    return this.h;\r\n  }\r\n  cambiarDeTama√±o() {\r\n    this.w = document.documentElement.clientWidth - 40;\r\n    this.h = document.documentElement.clientHeight - 40;\r\n    this.wi = (this.w / 10) * 2;\r\n    this.wd = (this.w / 10) * 8;\r\n    this.wj = (this.w / 10) * 6;\r\n    this.canvas.width = this.w;\r\n    this.canvas.height = this.h;\r\n  }\r\n  agregarEstrella(reposicion) {\r\n    let y = Math.round(Math.random() * (this.h + 100)) + -100;\r\n    if (reposicion) y = Math.round(Math.random() * this.h) - this.h;\r\n    let interior = Math.round(Math.random() * 5) + 1;\r\n    this.estrellas.push(\r\n      new Estrella(\r\n        this,\r\n        Math.round(Math.random() * (this.wj - 10) + this.wi + 10),\r\n        y,\r\n        Math.round(Math.random() * 5) + 5,\r\n        Math.round(Math.random() * 5) + 1,\r\n        interior,\r\n        interior + ((interior / 10) * Math.round(Math.random() * 9) + 1),\r\n        Math.round(Math.random() * 180) + 1\r\n      )\r\n    );\r\n  }\r\n  agregarLaser(tipo, invasor) {\r\n    if (invasor) {\r\n      this.laserInvasor.push(\r\n        new Laser(\r\n          this,\r\n          invasor.posicion.x + invasor.w / 2,\r\n          invasor.posicion.y + invasor.h,\r\n          tipo\r\n        )\r\n      );\r\n      this.sonidoDisparo.play();\r\n    } else {\r\n      if (this.canones <= 0) {\r\n        this.nave.tipo=0;\r\n        if (this.laserNave.length <= this.limiteDeLaser) {\r\n          this.laserNave.push(\r\n            new Laser(\r\n              this,\r\n              this.nave.posicion.x + this.nave.w / 2,\r\n              this.nave.posicion.y,\r\n              tipo\r\n            )\r\n          );\r\n          this.sonidoDisparoNave.play();\r\n        }\r\n      } else {\r\n        this.nave.tipo=1;\r\n        if (this.laserNave.length <= this.limiteDeLaser ) {\r\n          this.laserNave.push(\r\n            new Laser(\r\n              this,\r\n              this.nave.posicion.x + this.nave.w / 2 -5,\r\n              this.nave.posicion.y,\r\n              tipo\r\n            )\r\n          );\r\n          this.laserNave.push(\r\n            new Laser(\r\n              this,\r\n              this.nave.posicion.x - 5,\r\n              this.nave.posicion.y + this.nave.h / 2,\r\n              tipo\r\n            )\r\n          );\r\n          this.laserNave.push(\r\n            new Laser(\r\n              this,\r\n              this.nave.posicion.x + this.nave.w - 5,\r\n              this.nave.posicion.y + this.nave.h / 2,\r\n              tipo\r\n            )\r\n          );\r\n          this.sonidoDisparoNave.play();\r\n        }\r\n      }\r\n    }\r\n  }\r\n  agregarPowerUP() {\r\n    //console.log(\"Se agrega Power Up\");\r\n    let tipo = Math.floor(Math.random() * 6);\r\n    let px = this.wd;\r\n    let py = Math.floor(((Math.random() * this.h) / 10) * 8) + this.h / 10;\r\n    this.powerUPS.push(new Powerup(this, px, py, tipo));\r\n  }\r\n  cambiaAlturaInvasor(altura) {\r\n    this.invasores.forEach(invasor => {\r\n      invasor.posicion.y += altura;\r\n    });\r\n  }\r\n}\r\n","import \"./styles.css\";\nimport { initializeApp } from \"firebase/app\";\n\n\nimport Juego from \"./juego.js\";\nlet juego = new Juego(document.getElementById(\"pantalla\"));\nlet tiempoPasado = 0;\n\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAiY3bwulQUtLDgwXkolunJFDjG8gmRMoQ\",\n  authDomain: \"spaceinvaders-4e5a9.firebaseapp.com\",\n  databaseURL: \"https://spaceinvaders-4e5a9-default-rtdb.europe-west1.firebasedatabase.app\",\n  projectId: \"spaceinvaders-4e5a9\",\n  storageBucket: \"spaceinvaders-4e5a9.appspot.com\",\n  messagingSenderId: \"861620168064\",\n  appId: \"1:861620168064:web:0f43262878120e69948d65\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\nfunction cicloDeJuego(tiempo) {\n  let tiempoDelta = tiempo - tiempoPasado;\n  tiempoPasado = tiempo;\n  juego.actualizar(tiempoDelta);\n  juego.dibujar();\n  requestAnimationFrame(cicloDeJuego);\n}\nrequestAnimationFrame(cicloDeJuego);\n"]}