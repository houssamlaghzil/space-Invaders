export default class Invasor {
  constructor(juego, fila, columna, tipo) {
    this.juego = juego;
    this.fila = fila;
    this.columna = columna;
    this.w = juego.wj / 14;
    this.h = juego.h / 15;
    this.wi = juego.wi;
    this.wd = juego.wd;
    this.posicion = {
      x: this.wi + this.w + this.columna * (this.w + 10),
      y: 10 + this.fila * (this.h + 10)
    };
    this.tipo = tipo;
    this.energia = 1000;
    this.pos = 1;
    this.mov = Math.floor(Math.random() * 80);
  }
  dibujar() {
    this.crearInvasor(
      this.juego.ctx,
      this.posicion.x,
      this.posicion.y + this.juego.invasorVelocidad.y,
      this.w,
      this.h,
      this.tipo,
      this.pos
    );
  }
  actualizar() {
    //this.cambiarDeTamaño();
    if (Math.floor(Math.random() * 300) === 0) {
      this.juego.agregarLaser("i", this);
      this.juego.sonidoDisparo.play();
    }

    this.mov++;
    if (this.mov === 40) {
      this.pos = 2;
    }
    if (this.mov === 80) {
      this.pos = 1;
      this.mov = 0;
    }

    this.posicion.x += this.juego.invasorVelocidad.x;

    if (this.posicion.x <= this.wi || this.posicion.x + this.w >= this.wd) {
      //console.log( "invasor x: " + this.posicion.x + " juego Margen I: " + this.juego.wi + " juego Margen D: " + this.juego.wd);
      this.juego.invasorVelocidad.x = -this.juego.invasorVelocidad.x;
      this.juego.cambiaAlturaInvasor(10);
      if (this.posicion.x <= this.wi) this.posicion.x = this.wi + 1;
      else this.posicion.x = this.wd - this.w - 1;
    }
  }
  crearInvasor(ctx, x, y, w, h, tipo, pos) {
    let figura = {
      1: {
        1: [
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
          [0, 1, 1, 2, 1, 1, 1, 2, 1, 1, 0],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],
          [1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1],
          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0]
        ],
        2: [
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1],
          [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],
          [1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1],
          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0]
        ],
        3: [
          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]
        ],
        color: {
          1: "blue",
          2: "gray"
        },
        energia: 1
      },
      2: {
        1: [
          [0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0],
          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],
          [0, 0, 1, 2, 2, 1, 2, 2, 1, 0, 0],
          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],
          [0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1]
        ],
        2: [
          [0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0],
          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],
          [0, 0, 1, 2, 2, 1, 2, 2, 1, 0, 0],
          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],
          [0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0],
          [1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1],
          [0, 0, 0, 0, 0, 0, 0, 0, 10, 0, 0]
        ],
        3: [
          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]
        ],
        color: {
          1: "green",
          2: "gray"
        },
        energia: 3
      },
      3: {
        1: [
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1],
          [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],
          [1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1],
          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0]
        ],
        2: [
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
          [1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0]
        ],
        3: [
          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]
        ],
        color: {
          1: "red",
          2: "white"
        },
        energia: 4
      },
      4: {
        1: [
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],
          [0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 0],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1],
          [1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1],
          [0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0],
          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0]
        ],
        2: [
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],
          [0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 0],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1],
          [1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1],
          [0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0],
          [0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0]
        ],
        3: [
          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]
        ],
        color: {
          1: "yellow",
          2: "white"
        },
        energia: 5
      },
      5: {
        1: [
          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
          [1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1],
          [1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1]
        ],
        2: [
          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
          [1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1],
          [1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]
        ],
        3: [
          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]
        ],
        color: {
          1: "orange",
          2: "white"
        },
        energia: 6
      },
      6: {
        1: [
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
          [1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1]
        ],
        2: [
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
          [1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1],
          [1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]
        ],
        3: [
          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]
        ],
        color: {
          1: "pink",
          2: "white"
        },
        energia: 7
      },
      7: {
        1: [
          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],
          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
          [0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0],
          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
          [0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0],
          [0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0],
          [1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1]
        ],
        2: [
          [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0],
          [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],
          [0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0],
          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
          [0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0],
          [1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1],
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ],
        3: [
          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]
        ],
        color: {
          1: "purple",
          2: "white"
        },
        energia: 8
      },
      8: {
        1: [
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1],
          [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],
          [1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1],
          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
          [0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0],
          [1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1],
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ],
        2: [
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1],
          [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],
          [0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0],
          [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
          [0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0]
        ],
        3: [
          [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0],
          [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0],
          [0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],
          [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1]
        ],
        color: {
          1: "white",
          2: "orange"
        },
        energia: 9
      }
    };
    let wf = w / 11;
    let hf = h / 8;

    figura[tipo][pos].forEach((fila, filaIndex) => {
      fila.forEach((columna, columnaIndex) => {
        if (columna >= 1) {
          ctx.fillStyle = figura[tipo].color[columna];
          ctx.fillRect(x + wf * columnaIndex, y + hf * filaIndex, wf, hf);
        }
      });
    });

    if (this.energia >= 900) this.energia = figura[tipo].energia;
  }

  cambiarDeTamaño() {
    let ancho = this.juego.wj / 14;
    let alto = this.juego.h / 15;
    this.posicion.x -= this.wi - this.w;
    this.wi = this.juego.wi + this.w;
    this.w = ancho;
    this.posicion.x += this.wi + this.w;
    this.wd = this.juego.wi - this.w;
    this.h = alto;
  }
}
